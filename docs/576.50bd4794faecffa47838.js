"use strict";(self.webpackChunktimer=self.webpackChunktimer||[]).push([[576],{61:(R,E,n)=>{n.d(E,{o:()=>_});class _{constructor(){this.id_empresa=0,this.id=0,this.id_projeto=0,this.id_conta="",this.id_conta_versao="0101",this.id_subconta="",this.id_subcliente=0,this.id_resp=0,this.id_exec=0,this.id_motivo="",this.produtivo="",this.inicial="",this.final="",this.obs="",this.horasapon=0,this.encerramento="N",this.nlanc=0,this.user_insert=0,this.user_update=0,this.conta_descricao="",this.grupo_descricao="",this.estru_descricao="",this.resp_razao="",this.exec_razao="",this.proj_descricao="",this.motivo_descricao="",this.motivo_produtivo="",this.ativ_inicial="",this.ativ_final="",this.cli_razao=""}}},590:(R,E,n)=>{n.r(E),n.d(E,{DataEspecialModule:()=>Oa});var _=n(8583),Z=n(4655),q=n(9243),g=n(2238);class B{constructor(){this.id_empresa=0,this.id=0,this.dt_inicial="",this.dt_final="",this.descricao="",this.conta="",this.versao="",this.subconta="",this.entrada="00:00",this.saida="00:00",this.allday=!1,this.user_insert=0,this.user_update=0,this.grupo_descricao="",this.atividade_descricao=""}}var P=n(1441);class ${constructor(){this.id_empresa=0,this.id=0,this.dt_inicial="",this.grupo="",this.versao="",this.atividade="",this.descricao="",this.pagina=0,this.tamPagina=50,this.contador="N",this.orderby="",this.sharp=!1}}var H=n(5062);function z(i,s){var a,e,o;try{let r=0;return i.id_empresa=1,r=parseInt(Object(s).id,10),i.id=isNaN(r)?0:r,""!==(null===(a=Object(s).data)||void 0===a?void 0:a.trim())&&(i.dt_inicial=Object(s).data),""!==(null===(e=Object(s).descricao)||void 0===e?void 0:e.trim())&&(i.descricao=Object(s).descricao),""!==(null===(o=Object(s).OrderBy)||void 0===o?void 0:o.trim())&&(i.orderby=Object(s).orderby),i}catch(r){throw r}}var d=n(3032),A=n(3430),u=n(7117);class dt{constructor(){this.processar=!1,this.opcao=0,this.projeto=9e5,this.especial=new B}}var c=n(3679),f=n(3211),S=n(3525),C=n(3962),V=n(2401),x=n(9267);class pt{constructor(){this.id_empresa=0,this.conta="",this.versao="",this.subconta="",this.dt_inicial="",this.dt_final=""}}class ht{constructor(){this.id=0,this.razao="",this.especiais=0}}class mt{constructor(){this.flag=!1,this.usuario=new ht}}class gt{constructor(){this.processar=!1,this.opcao=0,this.projeto=9e5,this.id_usuario=0,this.razao_usuario="",this.especial=new B}}class K{constructor(){this.id_empresa=0,this.id_cab=0,this.id_usuario=0,this.data="",this.dt_inicial="",this.dt_final="",this.pagina=0,this.tamPagina=50,this.contador="N",this.orderby="",this.sharp=!1}}var t=n(7716),M=n(6748),D=n(789),U=n(1843),Y=n(2340),j=n(1841);let W=(()=>{class i{constructor(a){this.http=a,this.apiURL=Y.N.apiURL}getDatas_Especiais_Det(){return this.http.get(`${this.apiURL}Datas_Especiais_Det`)}getDatas_Especiais_DetParametro_01(a){return this.http.post(`${this.apiURL}datas_especiais_det`,a)}getData_Especial_Det(a,e,o,r){return this.http.get(`${this.apiURL}data_especial_det/${a}/${e}/${o}/${r}`)}data_especial_detInsert(a){return this.http.post(`${this.apiURL}data_especial_det`,a)}data_especial_detUpdate(a){return this.http.put(`${this.apiURL}data_especial_det`,a)}data_especial_detDelete(a,e,o,r){return this.http.delete(`${this.apiURL}data_especial_det/${a}/${e}/${o}/${r}`)}lista_usuario_by_especial(a){return this.http.post(`${this.apiURL}listausuariobyespecial`,a)}}return i.\u0275fac=function(a){return new(a||i)(t.LFG(j.eN))},i.\u0275prov=t.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();var N=n(2522),X=n(3968),O=n(1095),y=n(1436),w=n(6627),h=n(8295);function _t(i,s){if(1&i&&(t.TgZ(0,"tr"),t.TgZ(1,"td"),t.TgZ(2,"div"),t.TgZ(3,"mat-label",6),t._uU(4),t.qZA(),t.qZA(),t.qZA(),t.TgZ(5,"td"),t.TgZ(6,"div",8),t.TgZ(7,"mat-label",6),t._uU(8),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&i){const a=s.$implicit;t.xp6(4),t.Oqu(a.data),t.xp6(2),t.s9C("matTooltip",a.cab_descricao),t.xp6(2),t.Oqu(a.cab_descricao)}}let ft=(()=>{class i{constructor(a,e,o,r,l,p){this.dialogRef=a,this.data=e,this.globalService=o,this.appSnackBar=r,this.projetosService=l,this.data_Especial_DetService=p,this.data_Especial_CabModel=[],this.especiais=[],this.tamPagina=50,this.controlePaginas=new A.e(this.tamPagina,0),this.labelCadastro="",this.labelCadastro=`Auditor: ${e.razao_usuario}`}ngOnInit(){this.getDataEspecialContador()}ngOnDestroy(){var a;null===(a=this.inscricaoDataEspecial)||void 0===a||a.unsubscribe()}getDataEspecial(){let a=new K;a.id_empresa=this.globalService.getIdEmpresa(),a.id_usuario=this.data.id_usuario,a.dt_inicial=this.data.especial.dt_inicial,a.dt_final=this.data.especial.dt_final,a.contador="N",a.tamPagina=this.tamPagina,a.pagina=this.controlePaginas.getPaginalAtual(),this.globalService.setSpin(!0),this.inscricaoDataEspecial=this.data_Especial_DetService.getDatas_Especiais_DetParametro_01(a).subscribe(e=>{this.globalService.setSpin(!1),this.especiais=e},e=>{this.globalService.setSpin(!1),this.especiais=[],this.appSnackBar.openFailureSnackBar(`Pesquisa Nos Feriados ${(0,u.bZ)(e)}`,"OK")})}getDataEspecialContador(){let a=new K;a.id_empresa=this.globalService.getIdEmpresa(),a.id_usuario=this.data.id_usuario,a.dt_inicial=this.data.especial.dt_inicial,a.dt_final=this.data.especial.dt_final,a.contador="S",a.tamPagina=this.tamPagina,a.pagina=this.controlePaginas.getPaginalAtual(),this.globalService.setSpin(!0),this.globalService.setSpin(!0),this.inscricaoDataEspecial=this.data_Especial_DetService.getDatas_Especiais_DetParametro_01(a).subscribe(e=>{this.globalService.setSpin(!1),this.controlePaginas=new A.e(this.tamPagina,0==e.total?1:e.total),this.getDataEspecial()},e=>{this.globalService.setSpin(!1),this.controlePaginas=new A.e(this.tamPagina,0),this.appSnackBar.openFailureSnackBar(`Pesquisa Datas Especiais ${(0,u.bZ)(e)}`,"OK")})}onChangePage(){this.getDataEspecial()}closeModal(){this.dialogRef.close()}}return i.\u0275fac=function(a){return new(a||i)(t.Y36(g.so),t.Y36(g.WI),t.Y36(M.U),t.Y36(D.W),t.Y36(U.T),t.Y36(W))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-view-data-especial-dialog"]],decls:21,vars:3,consts:[[1,"div-barra"],[1,"example-spacer"],[3,"controle","changePage"],["mat-icon-button","","aria-label","Example icon-button with share icon","matTooltip","Atualizar","matTooltipPosition","above",1,"example-icon",3,"click"],["mat-icon-button","","aria-label","Example icon-button with share icon",1,"example-icon",3,"click"],[1,"Browse-Scroll"],[1,"Browse_Lanc_td"],[4,"ngFor","ngForOf"],[1,"ellipsis",3,"matTooltip"]],template:function(a,e){1&a&&(t.TgZ(0,"div",0),t.TgZ(1,"mat-toolbar"),t.TgZ(2,"span",1),t._uU(3),t.qZA(),t.TgZ(4,"app-navegator",2),t.NdJ("changePage",function(){return e.onChangePage()}),t.qZA(),t.TgZ(5,"button",3),t.NdJ("click",function(){return e.getDataEspecialContador()}),t.TgZ(6,"mat-icon"),t._uU(7,"rotate_right"),t.qZA(),t.qZA(),t.TgZ(8,"button",4),t.NdJ("click",function(){return e.closeModal()}),t.TgZ(9,"mat-icon"),t._uU(10,"cancel_presentation"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(11,"table",5),t.TgZ(12,"thead"),t.TgZ(13,"tr"),t.TgZ(14,"th",6),t._uU(15,"Data"),t.qZA(),t.TgZ(16,"th",6),t._uU(17,"Descri\xe7\xe3o"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(18,"table",5),t.TgZ(19,"tbody"),t.YNc(20,_t,9,3,"tr",7),t.qZA(),t.qZA()),2&a&&(t.xp6(3),t.Oqu(e.labelCadastro),t.xp6(1),t.Q6J("controle",e.controlePaginas),t.xp6(16),t.Q6J("ngForOf",e.especiais))},directives:[N.Ye,X.J,O.lW,y.gM,w.Hw,_.sg,h.hX],styles:['.class-form[_ngcontent-%COMP%]{font-size:12px}thead[_ngcontent-%COMP%]{position:sticky;top:0;z-index:1;background-color:gray;height:30px;border-collapse:separate;border-spacing:1 1;padding:4px}.content-scroll[_ngcontent-%COMP%]{height:400px;overflow:auto}.Browse-Scroll[_ngcontent-%COMP%]{width:100%;table-layout:fixed;border-collapse:separate;border-spacing:1 1;padding:4px}.Browse-Scroll[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .Browse-Scroll[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{text-align:left;box-sizing:border-box;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.Browse-Scroll[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(1), .Browse-Scroll[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(1){width:50%}.Browse-Scroll[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(2), .Browse-Scroll[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(2){width:50%}td[_ngcontent-%COMP%]{font-size:small;color:#00f;font-family:"Times New Roman",Times,serif}tr[_ngcontent-%COMP%]:nth-child(even){background-color:#f2f2aa}tr[_ngcontent-%COMP%]:hover{background-color:#caa99d}.Browse-Scroll[_ngcontent-%COMP%], .Browse-Scroll[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .Browse-Scroll[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{box-sizing:border-box}.Browse-Scroll[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{display:table;color:#000;width:100%}.Browse-Scroll[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]{display:table;width:100%;table-layout:fixed}.cb-box-area[_ngcontent-%COMP%]{display:flex;align-content:center;align-items:center;height:60px}.cb-box-marg[_ngcontent-%COMP%]{margin:0 10px}']}),i})();var Q=n(9715),I=n(9983),k=n(4368),F=n(7441),vt=n(7539),J=n(2458),tt=n(7234);function bt(i,s){if(1&i&&(t.TgZ(0,"mat-error"),t._uU(1),t.qZA()),2&i){const a=t.oxw();let e;t.xp6(1),t.hij(" ",null==(e=a.formulario.get("dt_inicial"))||null==e.errors?null:e.errors.message,"")}}function Ct(i,s){if(1&i){const a=t.EpF();t.TgZ(0,"button",29),t.NdJ("click",function(){return t.CHM(a),t.oxw().onCopyValue()}),t.TgZ(1,"mat-icon"),t._uU(2,"file_copy"),t.qZA(),t.qZA()}}function Zt(i,s){if(1&i&&(t.TgZ(0,"mat-error"),t._uU(1),t.qZA()),2&i){const a=t.oxw();let e;t.xp6(1),t.hij(" ",null==(e=a.formulario.get("dt_final"))||null==e.errors?null:e.errors.message,"")}}function At(i,s){if(1&i&&(t.TgZ(0,"mat-option",30),t._uU(1),t.qZA()),2&i){const a=s.$implicit;t.Q6J("value",a.subconta.substring(0,4)),t.xp6(1),t.hij(" ",a.estru_descri," ")}}function St(i,s){1&i&&(t.TgZ(0,"mat-error"),t._uU(1," Favor Informar O Grupo "),t.qZA())}function Tt(i,s){if(1&i&&(t.TgZ(0,"mat-option",30),t._uU(1),t.qZA()),2&i){const a=s.$implicit;t.Q6J("value",a.subconta.trim()),t.xp6(1),t.hij(" ",a.estru_descri," ")}}function Et(i,s){1&i&&(t.TgZ(0,"mat-error"),t._uU(1," Favor Informar A Atividade "),t.qZA())}function Pt(i,s){if(1&i&&(t.TgZ(0,"mat-error"),t._uU(1),t.qZA()),2&i){const a=t.oxw();let e;t.xp6(1),t.hij(" ",null==(e=a.formulario.get("descricao"))||null==e.errors?null:e.errors.message,"")}}function xt(i,s){if(1&i){const a=t.EpF();t.TgZ(0,"tr"),t.TgZ(1,"td"),t.TgZ(2,"div"),t.TgZ(3,"section",31),t.TgZ(4,"mat-checkbox",32),t.NdJ("change",function(o){const l=t.CHM(a).index;return t.oxw().onChangeIncluir(o,l)}),t._uU(5,"Incluir"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(6,"td"),t.TgZ(7,"div",33),t.TgZ(8,"mat-label",24),t._uU(9),t.qZA(),t.qZA(),t.qZA(),t.TgZ(10,"td"),t.TgZ(11,"div",33),t.TgZ(12,"mat-label",24),t._uU(13),t.qZA(),t.qZA(),t.qZA(),t.TgZ(14,"td"),t.TgZ(15,"barra-acoes",34),t.NdJ("changeOpcao",function(o){const l=t.CHM(a).$implicit;return t.oxw().escolha(o,l)}),t.qZA(),t.qZA(),t.qZA()}if(2&i){const a=s.$implicit;t.xp6(4),t.Q6J("checked",a.flag)("disabled",a.usuario.especiais>0),t.xp6(3),t.s9C("matTooltip",a.usuario.id),t.xp6(2),t.Oqu(a.usuario.id),t.xp6(2),t.s9C("matTooltip",a.usuario.razao),t.xp6(2),t.Oqu(a.usuario.razao),t.xp6(2),t.Q6J("CONSULTAR",a.usuario.especiais>0)("BARRA_ATIVIDADES",!1)("ALTERAR",!1)("EXCLUIR",!1)}}function Dt(i,s){if(1&i){const a=t.EpF();t.TgZ(0,"button",35),t.NdJ("click",function(){return t.CHM(a),t.oxw().UsersFunction()}),t.TgZ(1,"mat-icon"),t._uU(2,"supervisor_account"),t.qZA(),t._uU(3," Usu\xe1rios "),t.qZA()}}function Ot(i,s){if(1&i){const a=t.EpF();t.TgZ(0,"button",35),t.NdJ("click",function(){return t.CHM(a),t.oxw().actionFunction()}),t.TgZ(1,"mat-icon"),t._uU(2,"check"),t.qZA(),t._uU(3," Gravar "),t.qZA()}}function wt(i,s){if(1&i&&(t.TgZ(0,"p"),t._uU(1),t.qZA()),2&i){const a=t.oxw().$implicit;t.xp6(1),t.Oqu(a.usuario.razao)}}function qt(i,s){if(1&i&&(t.TgZ(0,"tr"),t.TgZ(1,"td"),t.TgZ(2,"div"),t.YNc(3,wt,2,1,"p",8),t.qZA(),t.qZA(),t.qZA()),2&i){const a=s.$implicit;t.xp6(3),t.Q6J("ngIf",a.flag)}}let Mt=(()=>{class i{constructor(a,e,o,r,l,p,m,v,T){this.formBuilder=a,this.dialogRef=e,this.data=o,this.globalService=r,this.appSnackBar=l,this.projetosService=p,this.atividadesService=m,this.data_Especial_DetService=v,this.viewDialog=T,this.idAcao=0,this.acao="",this.labelCadastro="",this.readOnly=!1,this.gravando=!1,this.focusEntrada=!1,this.focusCancelar=!1,this.contrato=new S.w,this.conta=new f.o,this.grupo=new f.o,this.grupos=[],this.atividade=new f.o,this.atividades=[],this.atividadesDoGrupo=[],this.usuarios=[],this.formulario=a.group({id:[{value:""}],dt_inicial:[{value:""},[(0,V.K)(!0)]],dt_final:[{value:""},[(0,V.K)(!0)]],id_grupo:[{value:""},[c.kI.required,(0,x.S)(1,15,!0)]],id_atividade:[{value:""},[c.kI.required,(0,x.S)(1,15,!0)]],allday:[{value:""}],entrada:[{value:""}],saida:[{value:""}],descricao:[{value:""},[(0,x.S)(1,50,!0)]]})}ngOnInit(){this.idAcao=this.data.opcao,this.setAcao(this.idAcao),this.setValuesNoParam(),this.getProjeto()}ngOnDestroy(){var a,e,o,r,l;null===(a=this.inscricaoConta)||void 0===a||a.unsubscribe(),null===(e=this.inscricaoGrupo)||void 0===e||e.unsubscribe(),null===(o=this.inscricaoAtividades)||void 0===o||o.unsubscribe(),null===(r=this.inscricaoProjeto)||void 0===r||r.unsubscribe(),null===(l=this.inscricaoUsuarios)||void 0===l||l.unsubscribe()}UsersFunction(){this.formulario.valid||this.idAcao==d.I.Exclusao?this.getUsuarios():(this.formulario.markAllAsTouched(),this.appSnackBar.openSuccessSnackBar("Formul\xe1rio Com Campos Inv\xe1lidos.","OK"))}actionFunction(){this.formulario.valid||this.idAcao==d.I.Exclusao?this.executaAcao():(this.formulario.markAllAsTouched(),this.appSnackBar.openSuccessSnackBar("Formul\xe1rio Com Campos Inv\xe1lidos.","OK"))}getConta(){let a=new C.l;a.id_empresa=this.globalService.getIdEmpresa(),a.id_projeto=this.data.projeto,a.controle="S",a.orderby="projeto",a.conta="90",a.nivel=1,a.tipo="C",this.globalService.setSpin(!0),this.inscricaoAtividades=this.atividadesService.getAtividades_01(a).subscribe(e=>{this.globalService.setSpin(!1),this.conta=e[0],this.getGrupos()},e=>{this.globalService.setSpin(!1),this.conta=new f.o,this.grupos=[],this.atividades=[]})}getGrupos(){let a=new C.l;a.id_empresa=this.globalService.getIdEmpresa(),a.id_projeto=this.data.projeto,a.controle="S",a.orderby="projeto",a.conta=this.conta.conta,a.nivel=2,a.tipo="S",this.globalService.setSpin(!0),console.log(a),this.inscricaoAtividades=this.atividadesService.getAtividades_01(a).subscribe(e=>{this.globalService.setSpin(!1),this.grupos=e,this.getAtividades()},e=>{this.globalService.setSpin(!1),console.log("retornei com erro",e),this.grupos=[]})}getAtividades(){let a=new C.l;a.id_empresa=this.globalService.getIdEmpresa(),a.id_projeto=this.contrato.id,a.controle="S",a.orderby="projeto",a.conta=this.grupo.conta,a.subconta=this.grupo.subconta.trim(),a.subconta_nivel="S",a.nivel_filtro=this.grupo.nivel,a.nivel=3,a.tipo="O",this.globalService.setSpin(!0),console.log(a),this.inscricaoAtividades=this.atividadesService.getAtividades_01(a).subscribe(e=>{this.globalService.setSpin(!1),this.atividades=e,this.setValues(),this.loadAtividadesByGrupo()},e=>{this.globalService.setSpin(!1),this.atividades=[]})}getProjeto(){this.globalService.setSpin(!0),this.inscricaoProjeto=this.projetosService.getProjeto(this.globalService.getIdEmpresa(),9e5).subscribe(a=>{this.globalService.setSpin(!1),this.contrato=a,console.log("Achei Projeto: ",this.contrato),this.getConta()},a=>{this.globalService.setSpin(!1),this.appSnackBar.openSuccessSnackBar(`Pesquisa Conta ${(0,u.bZ)(a)}`,"OK"),this.contrato=new S.w})}getUsuarios(){let o=new pt;o.id_empresa=this.globalService.getIdEmpresa(),o.conta="",o.conta="",o.versao="",o.subconta="",o.dt_inicial=(0,u.kT)(this.formulario.value.dt_inicial),o.dt_final=(0,u.kT)(this.formulario.value.dt_final),this.globalService.setSpin(!0),console.log(o),this.globalService.setSpin(!0),this.inscricaoUsuarios=this.data_Especial_DetService.lista_usuario_by_especial(o).subscribe(r=>{this.globalService.setSpin(!1),this.usuarios=[],r.forEach(l=>{const p=new mt;p.flag=!1,p.usuario=l,this.usuarios.push(p)})},r=>{this.globalService.setSpin(!1),this.appSnackBar.openSuccessSnackBar(`Pesquisa Usu\xe1rios x Data Especial ${(0,u.bZ)(r)}`,"OK"),this.contrato=new S.w})}loadAtividadesByGrupo(){let a=this.formulario.value.id_grupo;this.atividadesDoGrupo=this.atividades.filter(e=>e.subconta.substring(0,4)==a.substring(0,4))}closeModal(){this.dialogRef.close()}getAcoes(){return d.I}setAcao(a){switch(this.focusEntrada=!1,this.focusCancelar=!1,+a){case d.I.Inclusao:this.acao="Incluir",this.labelCadastro="Inclus\xe3o",this.readOnly=!1,this.focusEntrada=!0;break;case d.I.Edicao:this.acao="Alterar",this.labelCadastro=`Altera\xe7\xe3o - ${this.data.especial.descricao}`,this.readOnly=!1,this.focusEntrada=!0;break;case d.I.Consulta:this.acao="Voltar",this.labelCadastro=`Consulta - ${this.data.especial.descricao}`,this.readOnly=!0,this.focusCancelar=!0;break;case d.I.Exclusao:this.acao="Excluir",this.labelCadastro=`Exclus\xe3o - ${this.data.especial.descricao}`,this.focusEntrada=!1,this.readOnly=!0;break;default:this.acao="",this.labelCadastro=""}}executaAcao(){}getLabelCancel(){return this.idAcao==d.I.Consulta?"Voltar":"Cancelar"}setValues(){this.formulario.setValue({id:this.data.especial.id,dt_inicial:this.data.especial.dt_inicial,dt_final:this.data.especial.dt_final,id_grupo:this.data.especial.subconta.substring(0,4),id_atividade:this.data.especial.subconta,entrada:this.data.especial.entrada,saida:this.data.especial.saida,allday:this.data.especial.allday,descricao:this.data.especial.descricao})}setValuesNoParam(){this.formulario.setValue({id:0,dt_inicial:"",dt_final:"",id_grupo:"",id_atividade:"",entrada:"00:00",saida:"00:00",allday:!1,descricao:""})}NoValidtouchedOrDirty(a){var e,o,r;return!((null===(e=this.formulario.get(a))||void 0===e?void 0:e.valid)||!(null===(o=this.formulario.get(a))||void 0===o?void 0:o.touched)&&!(null===(r=this.formulario.get(a))||void 0===r?void 0:r.dirty))}onChangeGrupo(){this.loadAtividadesByGrupo(),this.formulario.patchValue({id_atividade:""})}escolha(a,e){this.loadEspecialCab(),this.openViewDataEspecialCabDialog(e)}openViewDataEspecialCabDialog(a){const e=new gt;e.id_usuario=a.usuario.id,e.razao_usuario=a.usuario.razao,e.especial.dt_inicial=this.data.especial.dt_inicial,e.especial.dt_final=this.data.especial.dt_final;const o=new g.vA;o.disableClose=!0,o.id="consulta-datas-especiais",o.width="60%",o.height="60%",o.data=e,o.disableClose=!0,this.viewDialog.open(ft,o).beforeClosed().subscribe(l=>{})}inverteSelecao(){this.usuarios.forEach(a=>{0==a.usuario.especiais&&(a.flag=!a.flag)})}onChangeIncluir(a,e){this.usuarios[e].flag=a.checked}loadEspecialCab(){this.data.especial.dt_inicial=this.formulario.value.dt_inicial,this.data.especial.dt_final=this.formulario.value.dt_final,this.data.especial.subconta=this.formulario.value.id_atividade,this.data.especial.descricao=this.formulario.value.descricao}hasValue(a){var e;return""!=(null===(e=this.formulario.get(a))||void 0===e?void 0:e.value)}onCopyValue(){this.formulario.patchValue({dt_final:this.formulario.value.dt_inicial})}okUsuarios(){let a=!1;for(const e of this.usuarios)if(e.flag){a=!0;break}return a}onAllDay(a){a.checked&&this.formulario.patchValue({entrada:"00:00",saida:"00:00",allday:!0})}}return i.\u0275fac=function(a){return new(a||i)(t.Y36(c.qu),t.Y36(g.so),t.Y36(g.WI),t.Y36(M.U),t.Y36(D.W),t.Y36(U.T),t.Y36(Q.a),t.Y36(W),t.Y36(g.uw))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-crud-data-especial-dialog"]],decls:78,vars:18,consts:[[1,"div-barra"],[1,"example-spacer"],["autocomplete","off",1,"class-form",3,"formGroup"],[1,"moldura"],[1,"col-med-3"],["appearance","outline",1,"col-max"],["matInput","","formControlName","id","readonly","true"],["matInput","","formControlName","dt_inicial","mask","00/00/0000","placeholder","DD/MM/AAAA"],[4,"ngIf"],["matInput","","formControlName","dt_final","mask","00/00/0000","placeholder","DD/MM/AAAA"],["matSuffix","","mat-icon-button","","aria-label","Clear",3,"click",4,"ngIf"],[1,"col-med-2"],["field","","appearance","outline",1,"col-max"],["formControlName","id_grupo",3,"selectionChange"],[3,"value",4,"ngFor","ngForOf"],["formControlName","id_atividade"],[1,"col-med-1"],[1,"check"],["formControlName","allday",1,"check-margem",3,"change"],["matInput","","formControlName","entrada","placeholder","HH:MM","mask","00:00",3,"readonly"],["matInput","","formControlName","saida","placeholder","HH:MM","mask","00:00",3,"readonly"],["matInput","","formControlName","descricao","oninput","this.value = this.value.toUpperCase()",3,"readonly"],[1,"Browse-Scroll"],[1,"Browse_Lanc_td",3,"dblclick"],[1,"Browse_Lanc_td"],[4,"ngFor","ngForOf"],[1,"button-container-right"],["mat-raised-button","","color","primary",3,"click",4,"ngIf"],["mat-raised-button","","color","accent",3,"click"],["matSuffix","","mat-icon-button","","aria-label","Clear",3,"click"],[3,"value"],[1,"cb-box-area"],[1,"cb-box-marg",3,"checked","disabled","change"],[1,"ellipsis",3,"matTooltip"],[3,"CONSULTAR","BARRA_ATIVIDADES","ALTERAR","EXCLUIR","changeOpcao"],["mat-raised-button","","color","primary",3,"click"]],template:function(a,e){if(1&a&&(t.TgZ(0,"div",0),t.TgZ(1,"mat-toolbar"),t.TgZ(2,"span",1),t.TgZ(3,"mat-label"),t._uU(4),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(5,"form",2),t.TgZ(6,"div",3),t.TgZ(7,"div",4),t.TgZ(8,"mat-form-field",5),t.TgZ(9,"mat-label"),t._uU(10,"Controle"),t.qZA(),t._UZ(11,"input",6),t.qZA(),t.TgZ(12,"mat-form-field",5),t.TgZ(13,"mat-label"),t._uU(14,"Data Inicial"),t.qZA(),t._UZ(15,"input",7),t.YNc(16,bt,2,1,"mat-error",8),t.qZA(),t.TgZ(17,"mat-form-field",5),t.TgZ(18,"mat-label"),t._uU(19,"Data Final"),t.qZA(),t._UZ(20,"input",9),t.YNc(21,Ct,3,0,"button",10),t.YNc(22,Zt,2,1,"mat-error",8),t.qZA(),t.qZA(),t.TgZ(23,"div",11),t.TgZ(24,"mat-form-field",12),t.TgZ(25,"mat-label"),t._uU(26,"Grupos"),t.qZA(),t.TgZ(27,"mat-select",13),t.NdJ("selectionChange",function(){return e.onChangeGrupo()}),t.YNc(28,At,2,2,"mat-option",14),t.qZA(),t.YNc(29,St,2,0,"mat-error",8),t.qZA(),t.TgZ(30,"mat-form-field",12),t.TgZ(31,"mat-label"),t._uU(32,"Atividades"),t.qZA(),t.TgZ(33,"mat-select",15),t.YNc(34,Tt,2,2,"mat-option",14),t.qZA(),t.YNc(35,Et,2,0,"mat-error",8),t.qZA(),t.qZA(),t.TgZ(36,"div",16),t.TgZ(37,"div",17),t.TgZ(38,"mat-checkbox",18),t.NdJ("change",function(r){return e.onAllDay(r)}),t._uU(39,"Dia Todo"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(40,"div",11),t.TgZ(41,"mat-form-field",5),t.TgZ(42,"mat-label"),t._uU(43,"Entrada"),t.qZA(),t._UZ(44,"input",19),t.qZA(),t.TgZ(45,"mat-form-field",5),t.TgZ(46,"mat-label"),t._uU(47,"Sa\xedda"),t.qZA(),t._UZ(48,"input",20),t.qZA(),t.qZA(),t.TgZ(49,"div",16),t.TgZ(50,"mat-form-field",5),t.TgZ(51,"mat-label"),t._uU(52,"Descri\xe7\xe3o"),t.qZA(),t._UZ(53,"input",21),t.YNc(54,Pt,2,1,"mat-error",8),t.qZA(),t.qZA(),t.qZA(),t.TgZ(55,"table",22),t.TgZ(56,"thead"),t.TgZ(57,"tr"),t.TgZ(58,"th",23),t.NdJ("dblclick",function(){return e.inverteSelecao()}),t._uU(59,"Escolha"),t.qZA(),t.TgZ(60,"th",24),t._uU(61,"C\xf3digo"),t.qZA(),t.TgZ(62,"th",24),t._uU(63,"Nome"),t.qZA(),t.TgZ(64,"th",24),t._uU(65,"A\xe7\xf5es"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(66,"table",22),t.TgZ(67,"tbody"),t.YNc(68,xt,16,10,"tr",25),t.qZA(),t.qZA(),t.TgZ(69,"div",26),t.YNc(70,Dt,4,0,"button",27),t.YNc(71,Ot,4,0,"button",27),t.TgZ(72,"button",28),t.NdJ("click",function(){return e.closeModal()}),t.TgZ(73,"mat-icon"),t._uU(74,"cancel"),t.qZA(),t._uU(75),t.qZA(),t.qZA(),t.qZA(),t.TgZ(76,"tbody"),t.YNc(77,qt,4,1,"tr",25),t.qZA()),2&a){let o,r,l,p,m;t.xp6(4),t.Oqu(e.labelCadastro),t.xp6(1),t.Q6J("formGroup",e.formulario),t.xp6(11),t.Q6J("ngIf",(null==(o=e.formulario.get("dt_inicial"))||null==o.errors?null:o.errors.ValidatorDate)&&e.NoValidtouchedOrDirty("dt_inicial")),t.xp6(5),t.Q6J("ngIf",e.hasValue("dt_inicial")),t.xp6(1),t.Q6J("ngIf",(null==(r=e.formulario.get("dt_final"))||null==r.errors?null:r.errors.ValidatorDate)&&e.NoValidtouchedOrDirty("dt_final")),t.xp6(6),t.Q6J("ngForOf",e.grupos),t.xp6(1),t.Q6J("ngIf",(null==(l=e.formulario.get("id_grupo"))||null==l.errors?null:l.errors.ValidatorStringLen)&&e.NoValidtouchedOrDirty("id_grupo")),t.xp6(5),t.Q6J("ngForOf",e.atividadesDoGrupo),t.xp6(1),t.Q6J("ngIf",(null==(p=e.formulario.get("id_atividade"))||null==p.errors?null:p.errors.ValidatorStringLen)&&e.NoValidtouchedOrDirty("id_atividade")),t.xp6(9),t.Q6J("readonly",e.data.especial.allday),t.xp6(4),t.Q6J("readonly",e.data.especial.allday),t.xp6(5),t.Q6J("readonly",e.readOnly),t.xp6(1),t.Q6J("ngIf",(null==(m=e.formulario.get("descricao"))||null==m.errors?null:m.errors.ValidatorStringLen)&&e.NoValidtouchedOrDirty("descricao")),t.xp6(14),t.Q6J("ngForOf",e.usuarios),t.xp6(2),t.Q6J("ngIf",!e.okUsuarios()),t.xp6(1),t.Q6J("ngIf",e.okUsuarios()),t.xp6(4),t.hij(" ",e.getLabelCancel()," "),t.xp6(2),t.Q6J("ngForOf",e.usuarios)}},directives:[N.Ye,h.hX,c._Y,c.JL,c.sg,h.KE,I.Nt,c.Fj,c.JJ,c.u,k.hx,_.O5,F.gD,_.sg,vt.oG,O.lW,w.Hw,h.TO,h.R9,J.ey,y.gM,tt.C],styles:['.class-form[_ngcontent-%COMP%]{font-size:12px}thead[_ngcontent-%COMP%]{position:sticky;top:0;z-index:1;background-color:gray;height:30px;border-collapse:separate;border-spacing:1 1;padding:4px}.content-scroll[_ngcontent-%COMP%]{height:400px;overflow:auto}.Browse-Scroll[_ngcontent-%COMP%]{width:100%;table-layout:fixed;border-collapse:separate;border-spacing:1 1;padding:4px}.Browse-Scroll[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .Browse-Scroll[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{text-align:left;box-sizing:border-box;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.Browse-Scroll[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(1), .Browse-Scroll[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(1){width:10%}.Browse-Scroll[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(2), .Browse-Scroll[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(2){width:20%}.Browse-Scroll[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(3), .Browse-Scroll[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(3){width:60%}.Browse-Scroll[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(4), .Browse-Scroll[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(4){width:10%}td[_ngcontent-%COMP%]{font-size:small;color:#00f;font-family:"Times New Roman",Times,serif}tr[_ngcontent-%COMP%]:nth-child(even){background-color:#f2f2aa}tr[_ngcontent-%COMP%]:hover{background-color:#caa99d}.Browse-Scroll[_ngcontent-%COMP%], .Browse-Scroll[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .Browse-Scroll[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{box-sizing:border-box}.Browse-Scroll[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{display:table;color:#000;width:100%}.Browse-Scroll[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]{display:table;width:100%;table-layout:fixed}.cb-box-area[_ngcontent-%COMP%]{display:flex;align-content:center;align-items:center;height:60px}.cb-box-marg[_ngcontent-%COMP%]{margin:0 10px}ckeck[_ngcontent-%COMP%]{display:flex;align-content:center;align-items:center;height:60px}.check-margem[_ngcontent-%COMP%]{margin:0 10px}']}),i})(),Ut=(()=>{class i{constructor(a){this.http=a,this.apiURL=Y.N.apiURL}getDatas_Especiais_Cab(){return this.http.get(`${this.apiURL}Datas_Especiais_Cab`)}getDatas_Especiais_CabParametro_01(a){return this.http.post(`${this.apiURL}datas_especiais_cab`,a)}getData_Especial_Cab(a,e,o){return this.http.get(`${this.apiURL}data_especial_cab/${a}/${e}/${o}`)}data_especial_cabInsert(a){return this.http.post(`${this.apiURL}data_especial_cab`,a)}data_especial_cabUpdate(a){return this.http.put(`${this.apiURL}data_especial_cab`,a)}data_especial_cabDelete(a,e,o){return this.http.delete(`${this.apiURL}data_especial_cab/${a}/${e}/${o}`)}}return i.\u0275fac=function(a){return new(a||i)(t.LFG(j.eN))},i.\u0275prov=t.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();var at=n(5626),et=n(17);class Nt{constructor(){this.titulo="Aten\xe7\xe3o",this.destinatario="",this.escopo="T",this.labelBottonSim="SIM",this.labelBottomNao="N\xc3O",this.resposta="",this.id_empresa=0,this.id_filial=0,this.id_inventario=0,this.pagina=0,this.parametro=new P.M}}class yt{constructor(){this.id_empresa=0,this.id_filial=0,this.id_inventario=0,this.destinatario="",this.assunto="",this.mensagem="",this.fileName=""}}let It=(()=>{class i{constructor(a){this.http=a,this.apiURL=Y.N.apiURL}sendEmailV2(a){return this.http.post(`${this.apiURL}enviaremailarquivo`,a)}}return i.\u0275fac=function(a){return new(a||i)(t.LFG(j.eN))},i.\u0275prov=t.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();var kt=n(2178);function Ft(i,s){if(1&i&&(t.TgZ(0,"mat-error"),t._uU(1),t.qZA()),2&i){const a=t.oxw();t.xp6(1),t.Oqu(a.getMensafield("destinatario"))}}function Jt(i,s){if(1&i&&(t.TgZ(0,"mat-option",15),t._uU(1),t.qZA()),2&i){const a=s.$implicit;t.Q6J("value",a.sigla),t.xp6(1),t.hij(" ",a.descricao," ")}}function Bt(i,s){if(1&i&&(t.TgZ(0,"mat-label"),t._uU(1),t.qZA()),2&i){const a=t.oxw();t.xp6(1),t.Oqu(a.processando)}}function Vt(i,s){1&i&&t._UZ(0,"mat-progress-bar",16)}let Yt=(()=>{class i{constructor(a,e,o,r,l){this.formBuilder=a,this.dialogRef=e,this.emailService=o,this.appSnackBar=r,this.data=l,this.showSpin=!1,this.escopos=[{sigla:"T",descricao:"Toda Consulta"},{sigla:"P",descricao:"P\xe1gina Atual"}],this.processando="Aguardando Defini\xe7\xf5es",this.formulario=a.group({destinatario:[{value:""},[(0,x.S)(1,500,!0)]],escopo:[{value:""}]})}ngOnInit(){this.data.resposta="N",this.setValue()}ngOnDestroy(){var a,e;null===(a=this.inscricaoEmail)||void 0===a||a.unsubscribe(),null===(e=this.inscricaoExcel)||void 0===e||e.unsubscribe()}closeModal(){this.dialogRef.close()}setValue(){this.formulario.setValue({destinatario:this.data.destinatario,escopo:this.data.escopo})}NoValidtouchedOrDirty(a){var e,o,r;return!((null===(e=this.formulario.get(a))||void 0===e?void 0:e.valid)||!(null===(o=this.formulario.get(a))||void 0===o?void 0:o.touched)&&!(null===(r=this.formulario.get(a))||void 0===r?void 0:r.dirty))}getMensafield(a){var e,o;return null===(o=null===(e=this.formulario.get(a))||void 0===e?void 0:e.errors)||void 0===o?void 0:o.message}onProcessar(){this.formulario.valid?(this.data.destinatario=this.formulario.value.destinatario,this.data.escopo=this.formulario.value.escopo,this.GerarExcel()):(this.formulario.markAllAsTouched(),this.appSnackBar.openSuccessSnackBar("Formul\xe1rio Com Campos Inv\xe1lidos.","OK"))}GerarExcel(){}sendMail(a){let e=new yt;e.id_empresa=this.data.id_empresa,e.id_filial=this.data.id_filial,e.id_inventario=this.data.id_inventario,e.assunto="Relat\xf3rio Dos Ativos Do Invent\xe1rio",e.destinatario=this.data.destinatario,e.mensagem="Mensagem enviada automaticamento por solicita\xe7\xe3o do usu\xe1rio. Favor Verificar Anexo.",e.fileName=a,this.processando="Enviando E-MAIL",this.showSpin=!0,this.inscricaoEmail=this.emailService.sendEmailV2(e).subscribe(o=>{this.showSpin=!1,this.appSnackBar.openSuccessSnackBar(o.message,"OK"),this.closeModal()},o=>{this.showSpin=!1,this.appSnackBar.openFailureSnackBar(`Falha Ao Enviar O E-Mail ${(0,u.bZ)(o)}`,"OK")})}}return i.\u0275fac=function(a){return new(a||i)(t.Y36(c.qu),t.Y36(g.so),t.Y36(It),t.Y36(D.W),t.Y36(g.WI))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-email-dialog"]],decls:28,vars:8,consts:[["mat-dialog-title",""],["mat-dialog-content",""],["autocomplete","off",3,"formGroup"],[1,"col-med-1"],["appearance","outline",1,"col-max"],["matInput","","formControlName","destinatario"],[4,"ngIf"],["field","","appearance","outline",1,"col-max"],["formControlName","escopo"],[3,"value",4,"ngFor","ngForOf"],[1,"spin"],["mode","indeterminate",4,"ngIf"],[1,"button-container-right"],["mat-raised-button","","color","accent","cdkFocusInitial","",3,"click"],["mat-raised-button","","color","primary",3,"click"],[3,"value"],["mode","indeterminate"]],template:function(a,e){1&a&&(t.TgZ(0,"h1",0),t._uU(1),t.qZA(),t.TgZ(2,"div",1),t.TgZ(3,"form",2),t.TgZ(4,"div",3),t.TgZ(5,"mat-form-field",4),t.TgZ(6,"mat-label"),t._uU(7,"Destinat\xe1rios"),t.qZA(),t._UZ(8,"textarea",5),t.YNc(9,Ft,2,1,"mat-error",6),t.qZA(),t.qZA(),t.TgZ(10,"div",3),t.TgZ(11,"mat-form-field",7),t.TgZ(12,"mat-label"),t._uU(13,"Situa\xe7\xe3o"),t.qZA(),t.TgZ(14,"mat-select",8),t.YNc(15,Jt,2,2,"mat-option",9),t.qZA(),t.qZA(),t.qZA(),t.TgZ(16,"div",10),t.YNc(17,Bt,2,1,"mat-label",6),t.YNc(18,Vt,1,0,"mat-progress-bar",11),t.qZA(),t.qZA(),t.TgZ(19,"div",12),t.TgZ(20,"button",13),t.NdJ("click",function(){return e.closeModal()}),t.TgZ(21,"mat-icon"),t._uU(22,"cancel"),t.qZA(),t._uU(23),t.qZA(),t.TgZ(24,"button",14),t.NdJ("click",function(){return e.onProcessar()}),t.TgZ(25,"mat-icon"),t._uU(26,"check"),t.qZA(),t._uU(27),t.qZA(),t.qZA(),t.qZA()),2&a&&(t.xp6(1),t.Oqu(e.data.titulo),t.xp6(2),t.Q6J("formGroup",e.formulario),t.xp6(6),t.Q6J("ngIf",e.NoValidtouchedOrDirty("destinatario")),t.xp6(6),t.Q6J("ngForOf",e.escopos),t.xp6(2),t.Q6J("ngIf",e.showSpin),t.xp6(1),t.Q6J("ngIf",e.showSpin),t.xp6(5),t.hij(" ",e.data.labelBottomNao," "),t.xp6(4),t.hij(" ",e.data.labelBottonSim," "))},directives:[g.uh,g.xY,c._Y,c.JL,c.sg,h.KE,h.hX,I.Nt,c.Fj,c.JJ,c.u,_.O5,F.gD,_.sg,O.lW,w.Hw,h.TO,J.ey,kt.pW],styles:["h1[_ngcontent-%COMP%]{text-align:left;font-family:Arial,Helvetica,sans-serif;font-size:x-large;color:#00f}.spin[_ngcontent-%COMP%]{margin-top:10px;margin-bottom:20px;font-size:small}"]}),i})();var it=n(6468),jt=n(3639),Qt=n(7265);class ot{constructor(s,a,e){this.indice=0,this.sigla="",this.descricao="",this.indice=s,this.sigla=a,this.descricao=e}}var st=n(8002),rt=n(5435),nt=n(4395),lt=n(7519),ct=n(1209);function Gt(i,s){if(1&i){const a=t.EpF();t.TgZ(0,"button",7),t.NdJ("click",function(){return t.CHM(a),t.oxw().onGetExcelToEmailOrDownLoad("e-mail")}),t.TgZ(1,"mat-icon"),t._uU(2,"email"),t.qZA(),t.qZA()}}function Lt(i,s){if(1&i){const a=t.EpF();t.TgZ(0,"button",8),t.NdJ("click",function(){return t.CHM(a),t.oxw().onGetExcelToEmailOrDownLoad("download")}),t.TgZ(1,"mat-icon"),t._uU(2,"cloud_download"),t.qZA(),t.qZA()}}function Rt(i,s){if(1&i&&(t.TgZ(0,"mat-error"),t._uU(1),t.qZA()),2&i){const a=t.oxw(2);t.xp6(1),t.Oqu(a.getMensafield("data"))}}function $t(i,s){if(1&i){const a=t.EpF();t.TgZ(0,"button",27),t.NdJ("click",function(){return t.CHM(a),t.oxw(2).onclearValue("data")}),t.TgZ(1,"mat-icon"),t._uU(2,"close"),t.qZA(),t.qZA()}}function Ht(i,s){if(1&i&&(t.TgZ(0,"mat-option",28),t._uU(1),t.qZA()),2&i){const a=s.$implicit;t.Q6J("value",a),t.xp6(1),t.hij(" ",a," ")}}function zt(i,s){if(1&i){const a=t.EpF();t.TgZ(0,"button",27),t.NdJ("click",function(o){return t.CHM(a),t.oxw(2).onclearValue("ano"),o.stopPropagation()}),t.TgZ(1,"mat-icon"),t._uU(2,"close"),t.qZA(),t.qZA()}}function Kt(i,s){if(1&i&&(t.TgZ(0,"mat-option",28),t._uU(1),t.qZA()),2&i){const a=s.$implicit;t.Q6J("value",a.nro),t.xp6(1),t.hij(" ",a.nome," ")}}function Wt(i,s){if(1&i){const a=t.EpF();t.TgZ(0,"button",27),t.NdJ("click",function(o){return t.CHM(a),t.oxw(2).onclearValue("mes"),o.stopPropagation()}),t.TgZ(1,"mat-icon"),t._uU(2,"close"),t.qZA(),t.qZA()}}function Xt(i,s){if(1&i&&(t.TgZ(0,"mat-option",28),t._uU(1),t.qZA()),2&i){const a=s.$implicit;t.Q6J("value",a.indice),t.xp6(1),t.hij(" ",a.descricao," ")}}function ta(i,s){if(1&i){const a=t.EpF();t.TgZ(0,"button",27),t.NdJ("click",function(o){return t.CHM(a),t.oxw(2).onclearValueCombo("tipo"),o.stopPropagation()}),t.TgZ(1,"mat-icon"),t._uU(2,"close"),t.qZA(),t.qZA()}}function aa(i,s){if(1&i&&(t.TgZ(0,"mat-option",28),t._uU(1),t.qZA()),2&i){const a=s.$implicit;t.Q6J("value",a.subconta),t.xp6(1),t.hij(" ",a.estru_descri," ")}}function ea(i,s){if(1&i){const a=t.EpF();t.TgZ(0,"button",27),t.NdJ("click",function(o){return t.CHM(a),t.oxw(2).onclearValueGrupo(),o.stopPropagation()}),t.TgZ(1,"mat-icon"),t._uU(2,"close"),t.qZA(),t.qZA()}}function ia(i,s){if(1&i&&(t.TgZ(0,"mat-option",28),t._uU(1),t.qZA()),2&i){const a=s.$implicit;t.Q6J("value",a.subconta),t.xp6(1),t.hij(" ",a.estru_descri," ")}}function oa(i,s){if(1&i){const a=t.EpF();t.TgZ(0,"button",27),t.NdJ("click",function(o){return t.CHM(a),t.oxw(2).onclearValueCombo("atividade"),o.stopPropagation()}),t.TgZ(1,"mat-icon"),t._uU(2,"close"),t.qZA(),t.qZA()}}function sa(i,s){if(1&i&&(t.TgZ(0,"mat-option",28),t._uU(1),t.qZA()),2&i){const a=s.$implicit;t.Q6J("value",a.id),t.xp6(1),t.hij(" ",a.razao," ")}}function ra(i,s){if(1&i){const a=t.EpF();t.TgZ(0,"button",27),t.NdJ("click",function(o){return t.CHM(a),t.oxw(2).onclearValueCombo("usuario"),o.stopPropagation()}),t.TgZ(1,"mat-icon"),t._uU(2,"close"),t.qZA(),t.qZA()}}function na(i,s){if(1&i){const a=t.EpF();t.TgZ(0,"button",27),t.NdJ("click",function(){return t.CHM(a),t.oxw(2).onclearValue("descricao")}),t.TgZ(1,"mat-icon"),t._uU(2,"close"),t.qZA(),t.qZA()}}function la(i,s){if(1&i&&(t.TgZ(0,"mat-option",28),t._uU(1),t.qZA()),2&i){const a=s.$implicit;t.Q6J("value",a.sigla),t.xp6(1),t.hij(" ",a.descricao," ")}}function ca(i,s){if(1&i){const a=t.EpF();t.TgZ(0,"form",9),t.TgZ(1,"div",10),t.TgZ(2,"mat-form-field",11),t.TgZ(3,"mat-label"),t._uU(4,"Data "),t.qZA(),t._UZ(5,"input",12),t.YNc(6,Rt,2,1,"mat-error",13),t.YNc(7,$t,3,0,"button",14),t.qZA(),t.TgZ(8,"mat-form-field",15),t.TgZ(9,"mat-label"),t._uU(10,"Ano"),t.qZA(),t.TgZ(11,"mat-select",16),t.NdJ("selectionChange",function(){return t.CHM(a),t.oxw().onChangeParametros()}),t.YNc(12,Ht,2,2,"mat-option",17),t.qZA(),t.YNc(13,zt,3,0,"button",14),t.qZA(),t.TgZ(14,"mat-form-field",15),t.TgZ(15,"mat-label"),t._uU(16,"M\xeas"),t.qZA(),t.TgZ(17,"mat-select",18),t.NdJ("selectionChange",function(){return t.CHM(a),t.oxw().onclearValueCombo("ano")}),t.YNc(18,Kt,2,2,"mat-option",17),t.qZA(),t.YNc(19,Wt,3,0,"button",14),t.qZA(),t.TgZ(20,"mat-form-field",15),t.TgZ(21,"mat-label"),t._uU(22,"Tipo"),t.qZA(),t.TgZ(23,"mat-select",19),t.NdJ("selectionChange",function(){return t.CHM(a),t.oxw().onChangeParametros()}),t.YNc(24,Xt,2,2,"mat-option",17),t.qZA(),t.YNc(25,ta,3,0,"button",14),t.qZA(),t.qZA(),t.TgZ(26,"div",20),t.TgZ(27,"mat-form-field",15),t.TgZ(28,"mat-label"),t._uU(29,"Grupo "),t.qZA(),t.TgZ(30,"mat-select",21),t.NdJ("selectionChange",function(){return t.CHM(a),t.oxw().onChangeGrupo()}),t.YNc(31,aa,2,2,"mat-option",17),t.qZA(),t.YNc(32,ea,3,0,"button",14),t.qZA(),t.TgZ(33,"mat-form-field",15),t.TgZ(34,"mat-label"),t._uU(35,"Atividade "),t.qZA(),t.TgZ(36,"mat-select",22),t.NdJ("selectionChange",function(){return t.CHM(a),t.oxw().onChangeParametros()}),t.YNc(37,ia,2,2,"mat-option",17),t.qZA(),t.YNc(38,oa,3,0,"button",14),t.qZA(),t.qZA(),t.TgZ(39,"div",23),t.TgZ(40,"mat-form-field",15),t.TgZ(41,"mat-label"),t._uU(42,"Usuario "),t.qZA(),t.TgZ(43,"mat-select",24),t.NdJ("selectionChange",function(){return t.CHM(a),t.oxw().onChangeParametros()}),t.YNc(44,sa,2,2,"mat-option",17),t.qZA(),t.YNc(45,ra,3,0,"button",14),t.qZA(),t.qZA(),t.TgZ(46,"div",23),t.TgZ(47,"mat-form-field",11),t.TgZ(48,"mat-label"),t._uU(49,"Descri\xe7\xe3o"),t.qZA(),t._UZ(50,"input",25),t.YNc(51,na,3,0,"button",14),t.qZA(),t.qZA(),t.TgZ(52,"div",23),t.TgZ(53,"mat-form-field",15),t.TgZ(54,"mat-label"),t._uU(55,"Ordernado Por"),t.qZA(),t.TgZ(56,"mat-select",26),t.NdJ("selectionChange",function(){return t.CHM(a),t.oxw().onChangeParametros()}),t.YNc(57,la,2,2,"mat-option",17),t.qZA(),t.qZA(),t.qZA(),t.qZA()}if(2&i){const a=t.oxw();t.Q6J("formGroup",a.parametros),t.xp6(6),t.Q6J("ngIf",a.NoValidtouchedOrDirty("data")),t.xp6(1),t.Q6J("ngIf",a.hasValue("data")),t.xp6(5),t.Q6J("ngForOf",a.anos),t.xp6(1),t.Q6J("ngIf",a.hasValue("ano")),t.xp6(5),t.Q6J("ngForOf",a.meses.ParametroMeses),t.xp6(1),t.Q6J("ngIf",a.hasValue("mes")),t.xp6(5),t.Q6J("ngForOf",a.tipos),t.xp6(1),t.Q6J("ngIf",a.hasValue("tipo")),t.xp6(6),t.Q6J("ngForOf",a.grupos),t.xp6(1),t.Q6J("ngIf",a.hasValue("grupo")),t.xp6(5),t.Q6J("ngForOf",a.atividadesDoGrupo),t.xp6(1),t.Q6J("ngIf",a.hasValue("atividade")),t.xp6(6),t.Q6J("ngForOf",a.usuarios),t.xp6(1),t.Q6J("ngIf",a.hasValue("usuario")),t.xp6(6),t.Q6J("ngIf",a.hasValue("descricao")),t.xp6(6),t.Q6J("ngForOf",a.orderby)}}let ua=(()=>{class i{constructor(a,e,o,r,l,p,m,v,T,b){this.formBuilder=a,this.globalService=e,this.usuarioSrv=o,this.appSnackBar=r,this.EmailDialog=l,this.DownLoadDialog=p,this.parametrosService=m,this.projetosService=v,this.atividadesService=T,this.localStorageService=b,this.paramName="",this.retorno=!1,this.email=!1,this.download=!1,this.controle_paginas=new A.e(50,0),this.hide=!0,this.change=new t.vpe,this.changeHide=new t.vpe,this.showFiltro=!0,this.hideAcao="Ocultar",this.orderby=[{sigla:"001",descricao:"Data"},{sigla:"002",descricao:"Grupo E Atividade"},{sigla:"003",descricao:"Usu\xe1rio"},{sigla:"004",descricao:"Descri\xe7\xe3o"}],this.anos=["2025","2024","2023","2022"],this.meses=new Qt.Y,this.parametro=new P.M,this.usuarios=[],this.contrato=new S.w,this.conta=new f.o,this.grupo=new f.o,this.grupos=[],this.atividade=new f.o,this.atividades=[],this.atividadesDoGrupo=[],this.tipos=[new ot(1,"FER","FERIADOS"),new ot(2,"ESP","DATA ESPECIAL")],this.enable_filter=!0,this.parametros=a.group({data:[{value:""}],ano:[{value:""}],mes:[{value:""}],grupo:[{value:""}],atividade:[{value:""}],usuario:[{value:""}],tipo:[{value:""}],descricao:[{value:""}],orderby:[{value:""}]}),this.setHide(),this.setValuesNoParam()}ngOnInit(){var a,e;this.localStorageService.getParametroModel(this.paramName),null===(a=this.parametros.get("data"))||void 0===a||a.valueChanges.pipe((0,st.U)(r=>r.trim()),(0,rt.h)(r=>r.length>=10),(0,nt.b)(350),(0,lt.x)()).subscribe(r=>this.onChangeParametros()),null===(e=this.parametros.get("descricao"))||void 0===e||e.valueChanges.pipe((0,st.U)(r=>r.trim()),(0,rt.h)(r=>r.length>0),(0,nt.b)(350),(0,lt.x)()).subscribe(r=>this.onChangeParametros()),this.loadParametros()}ngOnDestroy(){var a,e,o,r,l,p,m,v;null===(a=this.inscricaoParametro)||void 0===a||a.unsubscribe(),null===(e=this.inscricaoUsuarios)||void 0===e||e.unsubscribe(),null===(o=this.inscricaoExcel)||void 0===o||o.unsubscribe(),null===(r=this.inscricaoEmail)||void 0===r||r.unsubscribe(),null===(l=this.inscricaoConta)||void 0===l||l.unsubscribe(),null===(p=this.inscricaoGrupo)||void 0===p||p.unsubscribe(),null===(m=this.inscricaoAtividades)||void 0===m||m.unsubscribe(),null===(v=this.inscricaoProjeto)||void 0===v||v.unsubscribe()}getUsuarios(){let a=new it.w;a.id_empresa=this.globalService.getIdEmpresa(),this.globalService.setSpin(!0),this.inscricaoUsuarios=this.usuarioSrv.getusuarios_01(a).subscribe(e=>{this.globalService.setSpin(!1),this.usuarios=e,this.getProjeto()},e=>{this.globalService.setSpin(!1);const o=new jt.j;o.id=0,o.razao="Todos",this.usuarios.push(o)})}getConta(){let a=new C.l;a.id_empresa=this.globalService.getIdEmpresa(),a.id_projeto=this.contrato.id,a.controle="S",a.orderby="projeto",a.conta="90",a.nivel=1,a.tipo="C",this.globalService.setSpin(!0),console.log(a),this.inscricaoAtividades=this.atividadesService.getAtividades_01(a).subscribe(e=>{this.globalService.setSpin(!1),this.conta=e[0],this.getGrupos()},e=>{this.globalService.setSpin(!1),this.conta=new f.o,this.grupos=[],this.atividades=[]})}getGrupos(){let a=new C.l;a.id_empresa=this.globalService.getIdEmpresa(),a.id_projeto=this.contrato.id,a.controle="S",a.orderby="projeto",a.conta=this.conta.conta,a.nivel=2,a.tipo="S",this.globalService.setSpin(!0),console.log(a),this.inscricaoAtividades=this.atividadesService.getAtividades_01(a).subscribe(e=>{this.globalService.setSpin(!1),console.log("grupos",e),this.grupos=e,this.getAtividades()},e=>{this.globalService.setSpin(!1),console.log("retornei com erro",e),this.grupos=[]})}getAtividades(){let a=new C.l;a.id_empresa=this.globalService.getIdEmpresa(),a.id_projeto=this.contrato.id,a.controle="S",a.orderby="projeto",a.conta=this.grupo.conta,a.subconta=this.grupo.subconta.trim(),a.subconta_nivel="S",a.nivel_filtro=this.grupo.nivel,a.nivel=3,a.tipo="O",this.globalService.setSpin(!0),console.log(a),this.inscricaoAtividades=this.atividadesService.getAtividades_01(a).subscribe(e=>{this.globalService.setSpin(!1),this.atividades=e,console.log("Achei Atividades: ",this.atividades),this.setValues(),this.loadAtividadesByGrupo()},e=>{this.globalService.setSpin(!1),this.atividades=[]})}getProjeto(){this.globalService.setSpin(!0),this.inscricaoProjeto=this.projetosService.getProjeto(this.globalService.getIdEmpresa(),9e5).subscribe(a=>{this.globalService.setSpin(!1),this.contrato=a,console.log("Achei Projeto: ",this.contrato),this.getConta()},a=>{this.globalService.setSpin(!1),this.appSnackBar.openSuccessSnackBar(`Pesquisa Conta ${(0,u.bZ)(a)}`,"OK"),this.contrato=new S.w})}loadAtividadesByGrupo(){let a=this.parametros.value.grupo;console.log("Busncando Grupo: ",a),console.log("grupo:",a),this.atividadesDoGrupo=this.atividades.filter(e=>e.subconta.substring(0,4)==a.substring(0,4)),console.log("atividade do grupo:",this.atividadesDoGrupo)}openEmailDialog(){const a=new Nt;a.titulo="ENVIAR CONSULTA VIA E-MAIL",a.destinatario=this.globalService.usuario.email,a.escopo="T",a.labelBottomNao="Cancelar",a.labelBottonSim="Processar",a.id_empresa=this.globalService.getIdEmpresa(),a.pagina=this.controle_paginas.getPaginalAtual(),a.parametro=this.parametro;const e=new g.vA;e.disableClose=!0,e.id="consulta-email",e.width="800px",e.data=a,this.EmailDialog.open(Yt,e).beforeClosed().subscribe(r=>{})}openDownLoadDialog(){}setValues(){this.enable_filter=!1,console.log("parametros",this.parametro.getParametro()),this.parametros.setValue({data:(0,u.SL)(this.parametro.getParametro(),"data"),orderby:(0,u.SL)(this.parametro.getParametro(),"orderby"),ano:(0,u.P0)(this.parametro.getParametro(),"ano"),mes:(0,u.P0)(this.parametro.getParametro(),"mes"),grupo:(0,u.SL)(this.parametro.getParametro(),"grupo"),usuario:(0,u.P0)(this.parametro.getParametro(),"usuario"),atividade:(0,u.SL)(this.parametro.getParametro(),"atividade"),tipo:(0,u.P0)(this.parametro.getParametro(),"tipo"),descricao:(0,u.SL)(this.parametro.getParametro(),"descricao")}),this.enable_filter=!0}setValuesNoParam(){this.enable_filter=!1,this.parametros.setValue({data:"",ano:"",mes:"",usuario:"",grupo:"",atividade:"",tipo:"",descricao:"",orderby:"001"}),this.enable_filter=!0}onGetExcelToEmailOrDownLoad(a){"E-MAIL"==a.toUpperCase()?this.openEmailDialog():this.openDownLoadDialog()}hasValue(a){var e;return""!=(null===(e=this.parametros.get(a))||void 0===e?void 0:e.value)}onclearValue(a){var e;null===(e=this.parametros.get(a))||void 0===e||e.reset(""),this.onChangeParametros()}onclearValueGrupo(){var a,e;null===(a=this.parametros.get("grupo"))||void 0===a||a.reset(""),null===(e=this.parametros.get("atividade"))||void 0===e||e.reset(""),this.onChangeParametros()}onclearValueCombo(a){var e;null===(e=this.parametros.get(a))||void 0===e||e.reset(""),this.onChangeParametros()}onClear(a,e,o){var r;o.stopPropagation(),null===(r=this.parametros.get(e))||void 0===r||r.reset(),a.close()}ChangeValue(a,e){"descricao"==a&&this.parametros.patchValue({descricao:e}),"observacao"==a&&this.parametros.patchValue({observacao:e})}setHide(){this.hide=!this.hide,this.hideAcao=this.hide?"Mostrar":"Ocultar"}loadParametros(){this.parametro=new P.M,this.parametro.id_empresa=this.globalService.getIdEmpresa(),this.parametro.modulo=this.paramName,this.parametro.assinatura="V1.00 21/03/2025",this.parametro.id_usuario=this.globalService.usuario.id,this.parametro.parametro='\n     {\n        "usuario": 0,\n        "tipo": 0,\n        "nivel": 0,\n        "conta": "90    ",\n        "versao": "0101",\n        "subconta": "",\n        "atividade": "",\n        "data": "",\n        "descricao": "",\n        "ano": "",\n        "mes": "",\n        "orderby":"001",\n        "page": 1,\n        "new": false,\n        "id_retorno":0\n     }';const a=this.localStorageService.getParametroModel(this.paramName);null!==a?(this.parametro.load(a),this.getUsuarios()):this.getParametro()}getParametro(){this.globalService.setSpin(!0);let a=new H.E;a.id_empresa=this.parametro.id_empresa,a.modulo=this.parametro.modulo,a.assinatura=this.parametro.assinatura,a.id_usuario=this.parametro.id_usuario,a.orderby="Usu\xe1rio",this.inscricaoParametro=this.parametrosService.getParametrosParametro01(a).subscribe(e=>{this.globalService.setSpin(!1),this.parametro=new P.M,this.parametro.id_empresa=e[0].id_empresa,this.parametro.modulo=e[0].modulo,this.parametro.id_usuario=e[0].id_usuario,this.parametro.assinatura=e[0].assinatura,this.parametro.parametro=e[0].parametro,this.parametro.user_insert=e[0].user_insert,this.parametro.user_update=e[0].user_update,console.log("data parametro ",e[0]),this.setValues(),this.getUsuarios(),this.onChangeParametros(!1)},e=>{this.globalService.setSpin(!1),this.setValuesNoParam(),this.getProjeto(),this.onChangeParametros()})}updateParametros(){this.globalService.setSpin(!0),this.parametro.user_insert=this.globalService.usuario.id,this.parametro.user_update=this.globalService.usuario.id,this.refreshParametro(),this.inscricaoParametro=this.parametrosService.ParametroAtualiza(this.parametro).subscribe(a=>{this.globalService.setSpin(!1),this.appSnackBar.openSuccessSnackBar("Par\xe2metros Atualizados","OK")},a=>{this.globalService.setSpin(!1),this.appSnackBar.openFailureSnackBar(`Grava\xe7\xe3o Dos Parametros ${(0,u.bZ)(a)}`,"OK")})}refreshParametro(a=!0){let e=this.parametro.getParametro();Object(e).data=this.parametros.value.data,Object(e).ano=this.parametros.value.ano,Object(e).mes=this.parametros.value.mes,Object(e).usuario=this.parametros.value.usuario,Object(e).grupo=this.parametros.value.grupo,Object(e).atividade=this.parametros.value.atividade,Object(e).tipo=this.parametros.value.tipo,Object(e).descricao=this.parametros.value.descricao.toUpperCase(),Object(e).orderby=this.parametros.value.orderby,this.parametro.parametro=JSON.stringify(e)}onChangeGrupo(){this.loadAtividadesByGrupo(),this.parametros.patchValue({atividade:""})}onChangeParametros(a=!0){this.refreshParametro(a),this.enable_filter&&(console.log("Parametro Enviado: ",this.parametro),this.change.emit(this.parametro))}onSaveConfig(){this.updateParametros()}onHide(){this.setHide(),this.changeHide.emit(this.hide)}NoValidtouchedOrDirty(a){var e,o,r;return!((null===(e=this.parametros.get(a))||void 0===e?void 0:e.valid)||!(null===(o=this.parametros.get(a))||void 0===o?void 0:o.touched)&&!(null===(r=this.parametros.get(a))||void 0===r?void 0:r.dirty))}getMensafield(a){var e,o;return null===(o=null===(e=this.parametros.get(a))||void 0===e?void 0:e.errors)||void 0===o?void 0:o.message}}return i.\u0275fac=function(a){return new(a||i)(t.Y36(c.qu),t.Y36(M.U),t.Y36(ct.J),t.Y36(D.W),t.Y36(g.uw),t.Y36(g.uw),t.Y36(at.u),t.Y36(U.T),t.Y36(Q.a),t.Y36(et.n))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-filtro-datas-especiais"]],inputs:{paramName:["PARAMNAME","paramName"],retorno:["RETORNO","retorno"],email:["EMAIL","email"],download:["DOWNLOAD","download"],controle_paginas:["CONTROLE_PAGINAS","controle_paginas"],hide:["HIDE","hide"]},outputs:{change:"changeParametro",changeHide:"changeHide"},decls:12,vars:3,consts:[[1,"div-barra"],[1,"example-spacer"],["mat-icon-button","","aria-label","Example icon-button with share icon ","matTooltipPosition","above","matTooltip","Salvar Par\xe2metros","matTooltipPosition","above",3,"click"],["mat-icon-button","","aria-label","Example icon-button with share icon ","matTooltipPosition","above","matTooltip","Enviar Consulta Por E-Mail","matTooltipPosition","above",3,"click",4,"ngIf"],["mat-icon-button","","aria-label","Example icon-button with share icon ","matTooltipPosition","above","matTooltip","Baixar A Consulta","matTooltipPosition","above",3,"click",4,"ngIf"],["mat-icon-button","","aria-label","Example icon-button with share icon ","matTooltipPosition","above","matTooltip","Mostrar/Esconder","matTooltipPosition","above",3,"click"],["autocomplete","off",3,"formGroup",4,"ngIf"],["mat-icon-button","","aria-label","Example icon-button with share icon ","matTooltipPosition","above","matTooltip","Enviar Consulta Por E-Mail","matTooltipPosition","above",3,"click"],["mat-icon-button","","aria-label","Example icon-button with share icon ","matTooltipPosition","above","matTooltip","Baixar A Consulta","matTooltipPosition","above",3,"click"],["autocomplete","off",3,"formGroup"],[1,"col-med-4"],["appearance","outline",1,"col-max"],["matInput","","formControlName","data","mask","00/00/0000","placeholder","dd/mm/aaaa"],[4,"ngIf"],["matSuffix","","mat-icon-button","","aria-label","Clear",3,"click",4,"ngIf"],["field","","appearance","outline",1,"col-max"],["formControlName","ano",3,"selectionChange"],[3,"value",4,"ngFor","ngForOf"],["formControlName","mes",3,"selectionChange"],["formControlName","tipo",3,"selectionChange"],[1,"col-med-2"],["formControlName","grupo",3,"selectionChange"],["formControlName","atividade",1,"col-90",3,"selectionChange"],[1,"col-med-1"],["formControlName","usuario",3,"selectionChange"],["matInput","","formControlName","descricao",1,"uppercase"],["formControlName","orderby",3,"selectionChange"],["matSuffix","","mat-icon-button","","aria-label","Clear",3,"click"],[3,"value"]],template:function(a,e){1&a&&(t.TgZ(0,"div",0),t.TgZ(1,"span",1),t._uU(2,"Filtro Da Pesquisa"),t.qZA(),t.TgZ(3,"button",2),t.NdJ("click",function(){return e.onSaveConfig()}),t.TgZ(4,"mat-icon"),t._uU(5,"brightness_high"),t.qZA(),t.qZA(),t.YNc(6,Gt,3,0,"button",3),t.YNc(7,Lt,3,0,"button",4),t.TgZ(8,"button",5),t.NdJ("click",function(){return e.onHide()}),t.TgZ(9,"mat-icon"),t._uU(10,"remove_red_eye"),t.qZA(),t.qZA(),t.qZA(),t.YNc(11,ca,58,17,"form",6)),2&a&&(t.xp6(6),t.Q6J("ngIf",e.email),t.xp6(1),t.Q6J("ngIf",e.download),t.xp6(4),t.Q6J("ngIf",!e.hide))},directives:[O.lW,y.gM,w.Hw,_.O5,c._Y,c.JL,c.sg,h.KE,h.hX,I.Nt,c.Fj,k.hx,c.JJ,c.u,F.gD,_.sg,h.TO,h.R9,J.ey],styles:[""]}),i})();function da(i,s){if(1&i){const a=t.EpF();t.TgZ(0,"tr"),t.TgZ(1,"td"),t.TgZ(2,"div",11),t.TgZ(3,"mat-label",12),t._uU(4),t.qZA(),t.qZA(),t.qZA(),t.TgZ(5,"td"),t.TgZ(6,"div",11),t.TgZ(7,"mat-label",12),t._uU(8),t.qZA(),t.qZA(),t.qZA(),t.TgZ(9,"td"),t.TgZ(10,"div",11),t.TgZ(11,"mat-label",12),t._uU(12),t.qZA(),t.qZA(),t.qZA(),t.TgZ(13,"td"),t.TgZ(14,"div",11),t.TgZ(15,"mat-label",12),t._uU(16),t.qZA(),t.qZA(),t.qZA(),t.TgZ(17,"td"),t.TgZ(18,"div",11),t.TgZ(19,"mat-label",12),t._uU(20),t.qZA(),t.qZA(),t.qZA(),t.TgZ(21,"td"),t.TgZ(22,"barra-acoes",13),t.NdJ("changeOpcao",function(o){const l=t.CHM(a).$implicit;return t.oxw().escolha(o,l)}),t.qZA(),t.qZA(),t.qZA()}if(2&i){const a=s.$implicit;t.xp6(2),t.s9C("matTooltip",a.dt_inicial),t.xp6(2),t.Oqu(a.dt_inicial),t.xp6(2),t.s9C("matTooltip",a.dt_final),t.xp6(2),t.Oqu(a.dt_final),t.xp6(2),t.s9C("matTooltip",a.grupo_descricao),t.xp6(2),t.Oqu(a.grupo_descricao.trim()),t.xp6(2),t.s9C("matTooltip",a.atividade_descricao),t.xp6(2),t.Oqu(a.atividade_descricao.trim()),t.xp6(2),t.s9C("matTooltip",a.descricao),t.xp6(2),t.Oqu(a.descricao.trim()),t.xp6(2),t.Q6J("BARRA_ATIVIDADES",!1)("EXCLUIR",!1)}}let ut=(()=>{class i{constructor(a,e,o,r,l,p,m,v,T){this.formBuilder=a,this.data_Especial_CabService=e,this.router=o,this.route=r,this.appSnackBar=l,this.globalService=p,this.parametrosService=m,this.localStorageService=v,this.crudDialog=T,this.especiais=[],this.erro="",this.opcoesOrdenacao=[],this.opcoesCampo=[],this.tamPagina=50,this.controlePaginas=new A.e(this.tamPagina,0),this.retorno=!1,this.parametro=new P.M,this.hide=!1,this.parametros=a.group({ordenacao:[null],campo:[null],filtro:[null]}),this.inscricaoRota=r.params.subscribe(b=>{void 0===b.retorno?this.retorno=!1:(this.retorno=!0,this.globalService.estadoFind("feriado"))})}ngOnInit(){}ngOnDestroy(){var a,e,o,r,l;null===(a=this.inscricaoGetAll)||void 0===a||a.unsubscribe(),null===(e=this.inscricaoParametro)||void 0===e||e.unsubscribe(),null===(o=this.inscricaoRota)||void 0===o||o.unsubscribe(),null===(r=this.inscricaoApiBrasil)||void 0===r||r.unsubscribe(),null===(l=this.inscricaoSaveFeriado)||void 0===l||l.unsubscribe()}escolha(a,e){void 0!==e||((e=new B).id_empresa=this.globalService.getIdEmpresa()),this.openViewDataEspecialCabDialog(e,a)}getAcoes(){return d.I}getDataEspecial(){let a=new $;a=z(a,this.parametro.getParametro()),a.id_empresa=this.globalService.getIdEmpresa(),a.contador="N",a.tamPagina=this.tamPagina,a.pagina=this.controlePaginas.getPaginalAtual(),this.globalService.setSpin(!0),this.inscricaoGetAll=this.data_Especial_CabService.getDatas_Especiais_CabParametro_01(a).subscribe(e=>{this.globalService.setSpin(!1),this.especiais=e},e=>{this.globalService.setSpin(!1),this.especiais=[],this.appSnackBar.openFailureSnackBar(`Pesquisa Nos Feriados ${(0,u.bZ)(e)}`,"OK")})}getDataEspecialContador(){let a=new $;a=z(a,this.parametro.getParametro()),a.id_empresa=this.globalService.getIdEmpresa(),a.contador="S",a.tamPagina=this.tamPagina,a.pagina=this.controlePaginas.getPaginalAtual(),this.globalService.setSpin(!0),a.contador="S",a.tamPagina=this.tamPagina,this.globalService.setSpin(!0),this.inscricaoGetAll=this.data_Especial_CabService.getDatas_Especiais_CabParametro_01(a).subscribe(e=>{this.globalService.setSpin(!1),this.controlePaginas=new A.e(this.tamPagina,0==e.total?1:e.total),this.getDataEspecial()},e=>{this.globalService.setSpin(!1),this.controlePaginas=new A.e(this.tamPagina,0),this.appSnackBar.openFailureSnackBar(`Pesquisa Datas Especiais ${(0,u.bZ)(e)}`,"OK")})}getParametro(){this.globalService.setSpin(!0);let a=new H.E;a.id_empresa=this.parametro.id_empresa,a.modulo=this.parametro.modulo,a.assinatura=this.parametro.assinatura,a.id_usuario=this.parametro.id_usuario,a.orderby="Usu\xe1rio",this.inscricaoParametro=this.parametrosService.getParametrosParametro01(a).subscribe(e=>{this.globalService.setSpin(!1),this.parametro=new P.M,this.parametro.id_empresa=e[0].id_empresa,this.parametro.modulo=e[0].modulo,this.parametro.id_usuario=e[0].id_usuario,this.parametro.assinatura=e[0].assinatura,this.parametro.parametro=e[0].parametro,this.parametro.user_insert=e[0].user_insert,this.parametro.user_update=e[0].user_update,this.opcoesOrdenacao=(0,u.FO)(this.parametro.getParametro(),"ordenacao"),this.opcoesCampo=(0,u.FO)(this.parametro.getParametro(),"pesquisar"),this.setValues(),this.getDataEspecialContador()},e=>{this.globalService.setSpin(!1),this.setValues(),this.getDataEspecialContador()})}updateParametros(){this.globalService.setSpin(!0),this.parametro.user_insert=this.globalService.usuario.id,this.parametro.user_update=this.globalService.usuario.id;let a=this.parametro.getParametro();Object(a).op_ordenacao=this.opcoesOrdenacao.findIndex(e=>this.parametros.value.ordenacao==e),Object(a).op_pesquisar=this.opcoesCampo.findIndex(e=>this.parametros.value.campo==e),Object(a).descricao=this.parametros.value.filtro,Object(a).page=0,Object(a).new=!1,this.parametro.parametro=JSON.stringify(a),this.inscricaoParametro=this.parametrosService.ParametroAtualiza(this.parametro).subscribe(e=>{this.globalService.setSpin(!1),this.appSnackBar.openSuccessSnackBar("Par\xe2metros Atualizados","OK")},e=>{this.globalService.setSpin(!1),this.appSnackBar.openFailureSnackBar(`Grava\xe7\xe3o Dos Parametros ${(0,u.bZ)(e)}`,"OK")})}setValues(){this.parametros.setValue({ordenacao:this.opcoesOrdenacao[(0,u.P0)(this.parametro.getParametro(),"op_ordenacao")],campo:this.opcoesCampo[(0,u.P0)(this.parametro.getParametro(),"op_pesquisar")],filtro:(0,u.SL)(this.parametro.getParametro(),"descricao")})}getTexto(){return u.fd}onChangePage(){this.getDataEspecial()}onChangeParametros(a){console.log("change chamdo",a),this.parametro=a;let e=1;var o=this.localStorageService.getNumber("page");console.log("page:",o),null!=o&&(e=o),this.controlePaginas.setPaginaAtual(e),this.localStorageService.removeItem("page"),this.getDataEspecialContador()}onChangeHide(a){this.hide=a}onHome(){this.router.navigate([""])}onSaveConfig(){this.updateParametros()}openViewDataEspecialCabDialog(a,e){const o=new dt;o.opcao=e;const r=new g.vA;r.disableClose=!0,r.id="consulta-email",r.width="100%",r.height="100%",r.data=o,r.disableClose=!0,this.crudDialog.open(Mt,r).beforeClosed().subscribe(p=>{})}}return i.\u0275fac=function(a){return new(a||i)(t.Y36(c.qu),t.Y36(Ut),t.Y36(Z.F0),t.Y36(Z.gz),t.Y36(D.W),t.Y36(M.U),t.Y36(at.u),t.Y36(et.n),t.Y36(g.uw))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-crud-especial"]],viewQuery:function(a,e){if(1&a&&t.Gf(q.N7,5),2&a){let o;t.iGM(o=t.CRH())&&(e.viewPort=o.first)}},decls:37,vars:8,consts:[[1,"div-barra"],[1,"example-spacer"],[3,"controle","changePage"],["mat-icon-button","","aria-label","Example icon-button with share icon","matTooltip","Atualizar","matTooltipPosition","above",1,"example-icon",3,"click"],["mat-icon-button","","aria-label","Example icon-button with share icon ","matTooltipPosition","above","matTooltip","Salvar Par\xe2metros","matTooltipPosition","above",3,"click"],["mat-icon-button","","aria-label","Example icon-button with share icon ","matTooltip","Retorno","matTooltipPosition","above",3,"click"],["mat-icon-button","","aria-label","Example icon-button with share icon ","matTooltipPosition","above",3,"matTooltip","click"],["PARAMNAME","paramespeciais",3,"HIDE","EMAIL","DOWNLOAD","CONTROLE_PAGINAS","changeParametro","changeHide"],[1,"Browse-Scroll"],[1,"content-scroll",3,"itemSize"],[4,"cdkVirtualFor","cdkVirtualForOf"],[1,"ellipsis",3,"matTooltip"],[1,"Browse_Lanc_td"],[3,"BARRA_ATIVIDADES","EXCLUIR","changeOpcao"]],template:function(a,e){1&a&&(t.TgZ(0,"div",0),t.TgZ(1,"mat-toolbar"),t.TgZ(2,"span",1),t._uU(3,"Datas Especiais: "),t.qZA(),t.TgZ(4,"app-navegator",2),t.NdJ("changePage",function(){return e.onChangePage()}),t.qZA(),t.TgZ(5,"button",3),t.NdJ("click",function(){return e.getDataEspecialContador()}),t.TgZ(6,"mat-icon"),t._uU(7,"rotate_right"),t.qZA(),t.qZA(),t.TgZ(8,"button",4),t.NdJ("click",function(){return e.onSaveConfig()}),t.TgZ(9,"mat-icon"),t._uU(10,"brightness_high"),t.qZA(),t.qZA(),t.TgZ(11,"button",5),t.NdJ("click",function(){return e.onHome()}),t.TgZ(12,"mat-icon"),t._uU(13,"home"),t.qZA(),t.qZA(),t.TgZ(14,"button",6),t.NdJ("click",function(){return e.escolha(e.getAcoes().Inclusao)}),t.TgZ(15,"mat-icon"),t._uU(16,"add_circle_outline"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(17,"app-filtro-datas-especiais",7),t.NdJ("changeParametro",function(r){return e.onChangeParametros(r)})("changeHide",function(r){return e.onChangeHide(r)}),t.qZA(),t.TgZ(18,"table",8),t.TgZ(19,"thead"),t.TgZ(20,"tr"),t.TgZ(21,"th"),t._uU(22,"Dt Inicial"),t.qZA(),t.TgZ(23,"th"),t._uU(24,"Dt Final"),t.qZA(),t.TgZ(25,"th"),t._uU(26,"Grupo"),t.qZA(),t.TgZ(27,"th"),t._uU(28,"Atividade"),t.qZA(),t.TgZ(29,"th"),t._uU(30,"Descri\xe7\xe3o"),t.qZA(),t.TgZ(31,"th"),t._uU(32,"A\xe7\xf5es"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(33,"cdk-virtual-scroll-viewport",9),t.TgZ(34,"table",8),t.TgZ(35,"tbody"),t.YNc(36,da,23,12,"tr",10),t.qZA(),t.qZA(),t.qZA()),2&a&&(t.xp6(4),t.Q6J("controle",e.controlePaginas),t.xp6(10),t.Q6J("matTooltip",e.getTexto().incluir),t.xp6(3),t.Q6J("HIDE",e.hide)("EMAIL",!0)("DOWNLOAD",!0)("CONTROLE_PAGINAS",e.controlePaginas),t.xp6(16),t.Q6J("itemSize",50),t.xp6(3),t.Q6J("cdkVirtualForOf",e.especiais))},directives:[N.Ye,X.J,O.lW,y.gM,w.Hw,ua,q.N7,q.xd,q.x0,h.hX,tt.C],styles:['thead[_ngcontent-%COMP%]{position:sticky;top:0;z-index:1;background-color:#fff}.content-scroll[_ngcontent-%COMP%]{height:calc(100% - 50px);overflow:auto}.Browse-Scroll[_ngcontent-%COMP%]{width:100%;table-layout:fixed;border-collapse:separate;border-spacing:0 0}.Browse-Scroll[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .Browse-Scroll[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{text-align:left;box-sizing:border-box;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.Browse-Scroll[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(1), .Browse-Scroll[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(1){width:10%}.Browse-Scroll[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(2), .Browse-Scroll[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(2){width:10%}.Browse-Scroll[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(3), .Browse-Scroll[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(3){width:10%}.Browse-Scroll[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(4), .Browse-Scroll[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(4){width:25%}.Browse-Scroll[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(5), .Browse-Scroll[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(5){width:35%}.Browse-Scroll[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(6), .Browse-Scroll[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(6){width:10%}td[_ngcontent-%COMP%]{font-size:small;color:#00f;font-family:"Times New Roman",Times,serif}tr[_ngcontent-%COMP%]:nth-child(even){background-color:#f2f2aa}tr[_ngcontent-%COMP%]:hover{background-color:#caa99d}.Browse-Scroll[_ngcontent-%COMP%], .Browse-Scroll[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .Browse-Scroll[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{box-sizing:border-box}.Browse-Scroll[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{display:table;color:#000;background-color:red;width:100%}.Browse-Scroll[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]{display:table;width:100%;table-layout:fixed}']}),i})();var G=n(8239),L=n(9071),pa=n(1558);function ha(i,s){if(1&i&&(t.TgZ(0,"mat-error"),t._uU(1),t.qZA()),2&i){const a=t.oxw();let e;t.xp6(1),t.hij(" ",null==(e=a.formulario.get("data"))||null==e.errors?null:e.errors.message,"")}}function ma(i,s){if(1&i&&(t.TgZ(0,"mat-option",19),t._uU(1),t.qZA()),2&i){const a=s.$implicit;t.Q6J("value",a.id),t.xp6(1),t.hij(" ",a.razao," ")}}function ga(i,s){if(1&i&&(t.TgZ(0,"mat-form-field",16),t.TgZ(1,"mat-label"),t._uU(2,"Usu\xe1rio"),t.qZA(),t.TgZ(3,"mat-select",17),t.YNc(4,ma,2,2,"mat-option",18),t.qZA(),t.qZA()),2&i){const a=t.oxw();t.xp6(4),t.Q6J("ngForOf",a.lsUsuarios)}}function _a(i,s){if(1&i&&(t.TgZ(0,"mat-form-field",16),t.TgZ(1,"mat-label"),t._uU(2,"Usu\xe1rio"),t.qZA(),t._UZ(3,"input",20),t.qZA()),2&i){const a=t.oxw();t.xp6(3),t.Q6J("readonly",a.readOnlyKey())}}function fa(i,s){if(1&i&&(t.TgZ(0,"mat-option",19),t._uU(1),t.qZA()),2&i){const a=s.$implicit;t.Q6J("value",a.subconta.substring(0,4)),t.xp6(1),t.hij(" ",a.estru_descri," ")}}function va(i,s){if(1&i){const a=t.EpF();t.TgZ(0,"mat-form-field",21),t.TgZ(1,"mat-label"),t._uU(2,"Grupos"),t.qZA(),t.TgZ(3,"mat-select",22),t.NdJ("selectionChange",function(){return t.CHM(a),t.oxw().onChangeGrupos()}),t.YNc(4,fa,2,2,"mat-option",18),t.qZA(),t.qZA()}if(2&i){const a=t.oxw();t.xp6(4),t.Q6J("ngForOf",a.grupos)}}function ba(i,s){if(1&i&&(t.TgZ(0,"mat-form-field",21),t.TgZ(1,"mat-label"),t._uU(2,"Grupo"),t.qZA(),t._UZ(3,"input",23),t.qZA()),2&i){const a=t.oxw();t.xp6(3),t.Q6J("readonly",a.readOnly)}}function Ca(i,s){if(1&i&&(t.TgZ(0,"mat-option",19),t._uU(1),t.qZA()),2&i){const a=s.$implicit;t.Q6J("value",a.subconta.trim()),t.xp6(1),t.hij(" ",a.estru_descri," ")}}function Za(i,s){if(1&i&&(t.TgZ(0,"mat-form-field",21),t.TgZ(1,"mat-label"),t._uU(2,"Atividades"),t.qZA(),t.TgZ(3,"mat-select",24),t.YNc(4,Ca,2,2,"mat-option",18),t.qZA(),t.qZA()),2&i){const a=t.oxw();t.xp6(4),t.Q6J("ngForOf",a.atividades)}}function Aa(i,s){if(1&i&&(t.TgZ(0,"mat-form-field",21),t.TgZ(1,"mat-label"),t._uU(2,"Atividade"),t.qZA(),t._UZ(3,"input",25),t.qZA()),2&i){const a=t.oxw();t.xp6(3),t.Q6J("readonly",a.readOnly)}}function Sa(i,s){if(1&i&&(t.TgZ(0,"mat-error"),t._uU(1),t.qZA()),2&i){const a=t.oxw();let e;t.xp6(1),t.hij(" ",null==(e=a.formulario.get("descricao"))||null==e.errors?null:e.errors.message,"")}}function Ta(i,s){if(1&i){const a=t.EpF();t.TgZ(0,"button",26),t.NdJ("click",function(){return t.CHM(a),t.oxw().onSubmit()}),t.TgZ(1,"mat-icon"),t._uU(2,"check"),t.qZA(),t._uU(3),t.qZA()}if(2&i){const a=t.oxw();t.xp6(3),t.hij(" ",a.acao," ")}}const Ea=[{path:"",redirectTo:"especiais",pathMatch:"full"},{path:"especiais",component:ut},{path:"especiais/:retorno",component:ut},{path:"especial/:id_empresa/:id_usuario/:id_tipo/:data/:acao",component:(()=>{class i{constructor(a,e,o,r,l,p,m,v,T){this.formBuilder=a,this.feriadosService=e,this.usuariosService=o,this.projetosService=r,this.atividadesService=l,this.globalService=p,this.route=m,this.router=v,this.appSnackBar=T,this.tipos_data=this.globalService.getlsTiposData(),this.niveis_data=this.globalService.getlsNiveisData(),this.feriado=new L.u,this.acao="Sem Defini\xe7\xe3o",this.idAcao=d.I.Inclusao,this.readOnly=!0,this.labelCadastro="Cadastro De Datas Especiais",this.id_empresa=0,this.id_usuario=0,this.id_tipo=0,this.data="",this.lsUsuarios=[],this.contrato=new S.w,this.conta=new f.o,this.grupo=new f.o,this.grupos=[],this.atividade=new f.o,this.atividades=[],this.formulario=a.group({data:[{value:""},[(0,V.K)(!0)]],id_grupo:[{value:""},[c.kI.required]],id_grupo_:[{value:""}],id_atividade:[{value:""},[c.kI.required,(0,x.S)(1,15,!0)]],id_atividade_:[{value:""}],usuario:[{value:""},[c.kI.min(1)]],usuario_:[{value:""}],descricao:[{value:""},[(0,x.S)(1,50,!0)]]}),this.feriado=new L.u,this.inscricaoRota=m.params.subscribe(b=>{this.id_empresa=b.id_empresa,this.id_usuario=b.id_usuario,this.id_tipo=b.id_tipo,this.data=b.data,this.idAcao=b.acao,this.setAcao(b.acao)}),this.grupos.push(new f.o),this.atividades.push(new f.o),this.setValue()}ngOnInit(){this.getProjeto()}ngOnDestroy(){var a,e,o,r,l,p;null===(a=this.inscricaoGetFeriado)||void 0===a||a.unsubscribe(),null===(e=this.inscricaoGetUsuarios)||void 0===e||e.unsubscribe(),null===(o=this.inscricaoRota)||void 0===o||o.unsubscribe(),null===(r=this.inscricaoAcao)||void 0===r||r.unsubscribe(),null===(l=this.inscricaoAtividades)||void 0===l||l.unsubscribe(),null===(p=this.inscricaoGetProjeto)||void 0===p||p.unsubscribe()}onSubmit(){this.formulario.valid||this.idAcao==d.I.Exclusao?this.executaAcao():(this.formulario.markAllAsTouched(),this.appSnackBar.openSuccessSnackBar("Formul\xe1rio Com Campos Inv\xe1lidos.","OK"))}setValue(){this.formulario.setValue({data:this.feriado.data,id_grupo:this.feriado.subconta.substring(0,4).trim(),id_grupo_:this.idAcao==d.I.Consulta||this.idAcao==d.I.Exclusao?this.feriado.subconta_descricao:"",id_atividade:this.feriado.subconta.trim(),id_atividade_:this.idAcao==d.I.Consulta||this.idAcao==d.I.Exclusao?this.feriado.atividade_descricao:"",usuario:this.feriado.id_usuario,usuario_:this.idAcao==d.I.Consulta||this.idAcao==d.I.Exclusao||this.idAcao==d.I.Edicao?this.feriado.usu_nome:"",descricao:this.feriado.descricao})}getLabelCancel(){return this.idAcao==d.I.Consulta?"Voltar":"Cancelar"}onRetorno(){const a=this.globalService.estadoFind("feriado");if(null!=a){let e=a.getParametro();Object(e).new=this.idAcao==d.I.Inclusao,Object(e).id_retorno=this.feriado.data,a.parametro=JSON.stringify(e),this.globalService.estadoSave(a)}this.router.navigate(["/especiais/especiais","SIM"])}onCancel(){const a=this.globalService.estadoFind("grupo-user");if(null!=a){let e=a.getParametro();Object(e).new=!1,Object(e).id_retorno=this.idAcao==d.I.Consulta?this.feriado.data:"",a.parametro=JSON.stringify(e),this.globalService.estadoSave(a)}this.router.navigate(["/especiais/especiais","SIM"])}getFeriado(){this.globalService.setSpin(!0),this.inscricaoGetFeriado=this.feriadosService.getFeriado(this.id_empresa,this.id_usuario,this.id_tipo,this.data).subscribe(a=>{this.globalService.setSpin(!1),this.feriado=a,this.setValue()},a=>{this.globalService.setSpin(!1),console.log(a),this.appSnackBar.openFailureSnackBar(`Pesquisa Nos Feriados ${(0,u.bZ)(a)}`,"OK")})}getUsuarios(){let a=new it.w;a.id_empresa=this.globalService.getIdEmpresa(),a.orderby="Raz\xe3o",a.contador="N",a.pagina=0,this.globalService.setSpin(!0),this.inscricaoGetUsuarios=this.usuariosService.getusuarios_01(a).subscribe(e=>{this.globalService.setSpin(!1),this.lsUsuarios=e,this.idAcao==d.I.Inclusao?(this.feriado=new L.u,this.feriado.id_empresa=this.globalService.getIdEmpresa(),this.feriado.id_usuario=this.globalService.getUsuario().id,this.feriado.id_tipo=2,this.feriado.id_nivel=0,this.setValue()):this.getFeriado()},e=>{this.globalService.setSpin(!1),this.appSnackBar.openFailureSnackBar(`Pesquisa Nos Usu\xe1rios ${(0,u.bZ)(e)}`,"OK")})}setAcao(a){switch(+a){case d.I.Inclusao:this.acao="Gravar",this.labelCadastro="Datas Especiais - Inclus\xe3o.",this.readOnly=!1;break;case d.I.Edicao:this.acao="Gravar",this.labelCadastro="Datas Especiais - Altera\xe7\xe3o.",this.readOnly=!1;break;case d.I.Consulta:this.acao="Voltar",this.labelCadastro="Datas Especiais - Consulta.",this.readOnly=!0;break;case d.I.Exclusao:this.acao="Excluir",this.labelCadastro="Datas Especiais - Exclus\xe3o.",this.readOnly=!0}}executaAcao(){var a=this;switch(this.feriado.data=this.formulario.value.data,this.feriado.descricao=this.formulario.value.descricao,this.feriado.conta=this.conta.conta,this.feriado.versao=this.conta.versao,this.feriado.subconta=this.formulario.value.id_atividade,+this.idAcao){case d.I.Inclusao:this.globalService.setSpin(!1),this.feriado.user_insert=this.globalService.getUsuario().id,this.inscricaoAcao=this.feriadosService.FeriadoInsert(this.feriado).subscribe(function(){var e=(0,G.Z)(function*(o){a.globalService.setSpin(!1),a.onRetorno()});return function(o){return e.apply(this,arguments)}}(),e=>{this.globalService.setSpin(!1),this.appSnackBar.openFailureSnackBar(`Erro Na INclus\xe3o ${(0,u.bZ)(e)}`,"OK")});break;case d.I.Edicao:this.globalService.setSpin(!0),this.feriado.user_update=this.globalService.getUsuario().id,this.inscricaoAcao=this.feriadosService.FeriadoUpdate(this.feriado).subscribe(function(){var e=(0,G.Z)(function*(o){a.globalService.setSpin(!1),a.onRetorno()});return function(o){return e.apply(this,arguments)}}(),e=>{this.globalService.setSpin(!1),this.appSnackBar.openFailureSnackBar(`Erro Na Altera\xe7\xe3o ${(0,u.bZ)(e)}`,"OK")});break;case d.I.Exclusao:this.globalService.setSpin(!0),this.inscricaoAcao=this.feriadosService.FeriadoDelete(this.feriado.id_empresa,this.feriado.id_usuario,this.feriado.id_tipo,this.feriado.data).subscribe(function(){var e=(0,G.Z)(function*(o){a.globalService.setSpin(!1),a.onRetorno()});return function(o){return e.apply(this,arguments)}}(),e=>{this.globalService.setSpin(!1),this.appSnackBar.openFailureSnackBar(`Erro Na Exclusao ${(0,u.bZ)(e)}`,"OK")})}}getAcoes(){return d.I}touchedOrDirty(a){var e,o;return!(!(null===(e=this.formulario.get(a))||void 0===e?void 0:e.touched)&&!(null===(o=this.formulario.get(a))||void 0===o?void 0:o.dirty))}getValidfield(a){var e,o;return(null===(o=null===(e=this.formulario.get(a))||void 0===e?void 0:e.errors)||void 0===o?void 0:o.ValidatorStringLen)&&this.touchedOrDirty(a)}getMensafield(a){var e,o;return null===(o=null===(e=this.formulario.get(a))||void 0===e?void 0:e.errors)||void 0===o?void 0:o.message}getConta(){let a=new C.l;a.id_empresa=this.globalService.getIdEmpresa(),a.id_projeto=this.contrato.id,a.controle="S",a.orderby="projeto",a.conta="90",a.nivel=1,a.tipo="C",this.globalService.setSpin(!0),console.log(a),this.inscricaoAtividades=this.atividadesService.getAtividades_01(a).subscribe(e=>{this.globalService.setSpin(!1),this.conta=e[0],this.getGrupos()},e=>{this.globalService.setSpin(!1),this.conta=new f.o,this.grupos=[],this.atividades=[]})}getGrupos(){let a=new C.l;a.id_empresa=this.globalService.getIdEmpresa(),a.id_projeto=this.contrato.id,a.controle="S",a.orderby="projeto",a.conta=this.conta.conta,a.nivel=2,a.tipo="S",this.globalService.setSpin(!0),console.log(a),this.inscricaoAtividades=this.atividadesService.getAtividades_01(a).subscribe(e=>{this.globalService.setSpin(!1),console.log("grupos",e),this.grupos=e,this.getAtividades()},e=>{this.globalService.setSpin(!1),console.log("retornei com erro",e),this.grupos=[]})}getAtividades(){let a=new C.l;a.id_empresa=this.globalService.getIdEmpresa(),a.id_projeto=this.contrato.id,a.controle="S",a.orderby="projeto",a.conta=this.grupo.conta,a.subconta=this.grupo.subconta.trim(),a.subconta_nivel="S",a.nivel_filtro=this.grupo.nivel,a.nivel=3,a.tipo="O",this.globalService.setSpin(!0),console.log(a),this.inscricaoAtividades=this.atividadesService.getAtividades_01(a).subscribe(e=>{this.globalService.setSpin(!1),this.atividades=e,this.getUsuarios()},e=>{this.globalService.setSpin(!1),this.atividades=[]})}getProjeto(){this.globalService.setSpin(!0),this.inscricaoGetProjeto=this.projetosService.getProjeto(this.globalService.getIdEmpresa(),9e5).subscribe(a=>{this.globalService.setSpin(!1),this.contrato=a,this.getConta()},a=>{this.globalService.setSpin(!1),this.appSnackBar.openSuccessSnackBar(`Pesquisa Contrato ${(0,u.bZ)(a)}`,"OK"),this.contrato=new S.w})}onChangeGrupos(){let a=this.grupos.findIndex(e=>{var o;return e.subconta===(null===(o=this.formulario.value)||void 0===o?void 0:o.id_grupo)});a>=0&&(this.atividades=[],this.grupo=this.grupos[a],this.getAtividades())}readOnlyKey(){return this.idAcao!=d.I.Inclusao}}return i.\u0275fac=function(a){return new(a||i)(t.Y36(c.qu),t.Y36(pa.v),t.Y36(ct.J),t.Y36(U.T),t.Y36(Q.a),t.Y36(M.U),t.Y36(Z.gz),t.Y36(Z.F0),t.Y36(D.W))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-especial-view"]],decls:33,vars:14,consts:[[1,"div-barra"],[1,"example-spacer"],["autocomplete","off",3,"formGroup"],[1,"moldura"],[1,"col-med-3"],["appearance","outline",1,"col-max"],["matInput","","formControlName","data","mask","00/00/0000","placeholder","DD/MM/AAAA",3,"readonly"],[4,"ngIf"],["field","","appearance","outline","class","col-max column-span-2",4,"ngIf"],[1,"col-med-2"],["field","","appearance","outline","class","col-max",4,"ngIf"],[1,"col-med-1"],["matInput","","formControlName","descricao","oninput","this.value = this.value.toUpperCase()",3,"readonly"],[1,"button-container-right"],["mat-raised-button","","color","primary",3,"click",4,"ngIf"],["mat-raised-button","","color","accent",3,"click"],["field","","appearance","outline",1,"col-max","column-span-2"],["formControlName","usuario"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["matInput","","formControlName","usuario_",3,"readonly"],["field","","appearance","outline",1,"col-max"],["formControlName","id_grupo",3,"selectionChange"],["matInput","","formControlName","id_grupo_",3,"readonly"],["formControlName","id_atividade"],["matInput","","formControlName","id_atividade_",3,"readonly"],["mat-raised-button","","color","primary",3,"click"]],template:function(a,e){if(1&a&&(t._uU(0,"<"),t.TgZ(1,"div",0),t.TgZ(2,"mat-toolbar"),t.TgZ(3,"span",1),t.TgZ(4,"mat-label"),t._uU(5),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(6,"form",2),t.TgZ(7,"div",3),t.TgZ(8,"div",4),t.TgZ(9,"mat-form-field",5),t.TgZ(10,"mat-label"),t._uU(11,"Data"),t.qZA(),t._UZ(12,"input",6),t.YNc(13,ha,2,1,"mat-error",7),t.qZA(),t.YNc(14,ga,5,1,"mat-form-field",8),t.YNc(15,_a,4,1,"mat-form-field",8),t.qZA(),t.TgZ(16,"div",9),t.YNc(17,va,5,1,"mat-form-field",10),t.YNc(18,ba,4,1,"mat-form-field",10),t.YNc(19,Za,5,1,"mat-form-field",10),t.YNc(20,Aa,4,1,"mat-form-field",10),t.qZA(),t.qZA(),t.TgZ(21,"div",11),t.TgZ(22,"mat-form-field",5),t.TgZ(23,"mat-label"),t._uU(24,"Descri\xe7\xe3o"),t.qZA(),t._UZ(25,"input",12),t.YNc(26,Sa,2,1,"mat-error",7),t.qZA(),t.qZA(),t.TgZ(27,"div",13),t.YNc(28,Ta,4,1,"button",14),t.TgZ(29,"button",15),t.NdJ("click",function(){return e.onCancel()}),t.TgZ(30,"mat-icon"),t._uU(31,"cancel"),t.qZA(),t._uU(32),t.qZA(),t.qZA(),t.qZA()),2&a){let o,r;t.xp6(5),t.Oqu(e.labelCadastro),t.xp6(1),t.Q6J("formGroup",e.formulario),t.xp6(6),t.Q6J("readonly",e.readOnlyKey()),t.xp6(1),t.Q6J("ngIf",(null==(o=e.formulario.get("data"))||null==o.errors?null:o.errors.ValidatorDate)&&e.touchedOrDirty("data")),t.xp6(1),t.Q6J("ngIf",e.idAcao!=e.getAcoes().Consulta&&e.idAcao!=e.getAcoes().Exclusao&&e.idAcao!=e.getAcoes().Edicao),t.xp6(1),t.Q6J("ngIf",e.idAcao==e.getAcoes().Consulta||e.idAcao==e.getAcoes().Exclusao||e.idAcao==e.getAcoes().Edicao),t.xp6(2),t.Q6J("ngIf",e.idAcao!=e.getAcoes().Consulta&&e.idAcao!=e.getAcoes().Exclusao),t.xp6(1),t.Q6J("ngIf",e.idAcao==e.getAcoes().Consulta||e.idAcao==e.getAcoes().Exclusao),t.xp6(1),t.Q6J("ngIf",e.idAcao!=e.getAcoes().Consulta&&e.idAcao!=e.getAcoes().Exclusao),t.xp6(1),t.Q6J("ngIf",e.idAcao==e.getAcoes().Consulta||e.idAcao==e.getAcoes().Exclusao),t.xp6(5),t.Q6J("readonly",e.readOnly),t.xp6(1),t.Q6J("ngIf",(null==(r=e.formulario.get("descricao"))||null==r.errors?null:r.errors.ValidatorStringLen)&&e.touchedOrDirty("descricao")),t.xp6(2),t.Q6J("ngIf",3!=e.idAcao),t.xp6(4),t.hij(" ",e.getLabelCancel()," ")}},directives:[N.Ye,h.hX,c._Y,c.JL,c.sg,h.KE,I.Nt,c.Fj,k.hx,c.JJ,c.u,_.O5,O.lW,w.Hw,h.TO,F.gD,_.sg,J.ey],styles:[""]}),i})()}];let Pa=(()=>{class i{}return i.\u0275fac=function(a){return new(a||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[[Z.Bz.forChild(Ea)],Z.Bz]}),i})();var xa=n(5426),Da=n(4466);let Oa=(()=>{class i{}return i.\u0275fac=function(a){return new(a||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[[_.ez,Pa,xa.q,c.u5,q.Cl,c.UX,Da.m,k.yI.forChild()]]}),i})()},6468:(R,E,n)=>{n.d(E,{w:()=>_});class _{constructor(){this.id_empresa=0,this.id=0,this.ativo="",this.razao="",this.cnpj_cpf="",this.grupo=[],this.timer="",this.ticket="",this.flag_ponte="",this.data="",this.pagina=0,this.tamPagina=50,this.contador="N",this.orderby="",this.sharp=!1}}}}]);